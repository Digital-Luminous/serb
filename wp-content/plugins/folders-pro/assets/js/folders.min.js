!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}((function(e,t){var s,o,a,n,r,l,c,d,p,u="#js-tree-menu",m="",f=!1,h=!1,_=0,g=0,v=0,w=!1,j="",y=[],k=wcp_settings.current_url,b=[],x=0,C=0,I=null,D="<li class='grid-view' data-id='__folder_id__' id='folder___folder_id__'><div class='folder-item is-folder' data-id='__folder_id__'><a title='__folder_name__' id='folder_view___folder_id__'class='folder-view __append_class__ has-new-folder'data-id='__folder_id__'><span class='folder item-name'><span id='wcp_folder_text___folder_id__'class='folder-title'>__folder_name__</span></span></a></div></li>",S=null,E=null,T=1,O=0,P="",L=0,N=0,A=0,H=[],R=0,U=wcp_settings.user_access,F=!1,V="";function M(){var t=new FormData;t.append("media_files_0",H[R]),t.append("media_file_name[0]",H[R].webkitRelativePath),t.append("post_type",wcp_settings.post_type),t.append("nonce",wcp_settings.nonce),t.append("action","upload_premio_folder"),e(".form-loader-count").css("width","100%"),e.ajax({url:wcp_settings.ajax_url,type:"post",data:t,contentType:!1,processData:!1,success:function(t){if(1==(t=e.parseJSON(t)).status){if(R++,H.length!=R){M(),jQuery(".media-folder-loader").show();var s=R/H.length*100;jQuery(".folder-meter").css("width",s+"%"),jQuery("#current_upload_files").text(R+1)}else e("#upload_media_folder").prop("disabled",!1),e("#upload_media_folder").val(""),jQuery(".media-folder-loader").hide(),e(".form-loader-count").css("width","0px"),ue(),ye(0),e("#media-attachment-taxonomy-filter").length&&(wp.media.frame.setState("insert"),null!==wp.media.frame.content.get()&&void 0!==wp.media.frame.content.get().collection?(wp.media.frame.content.get().collection.props.set({ignore:+new Date}),wp.media.frame.content.get().options.selection.reset()):wp.media.frame.library.props.set({ignore:+new Date})),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_folders_by_order&nonce="+wcp_settings.nonce+"&order=default",method:"post",success:function(t){1==(t=e.parseJSON(t)).status&&(e("#js-tree-menu").jstree().destroy(),e("#js-tree-menu").append("<ul></ul>"),e("#js-tree-menu ul").html(t.data),re(),b=t.terms,fe()),e(".form-loader-count").css("width","0"),G()}})}}})}function J(){we(),"admin"!=U&&"view-edit"!=U||(e(".wcp-move-file:not(.ui-draggable)").draggable({revert:"invalid",containment:"document",helper:"clone",cursor:"move",start:function(t,s){e(this).closest("td").addClass("wcp-draggable"),e("body").addClass("no-hover-css")},stop:function(t,s){e(this).closest("td").removeClass("wcp-draggable"),e("body").removeClass("no-hover-css")}}),e(".wcp-move-multiple:not(.ui-draggable)").draggable({revert:"invalid",containment:"document",helper:function(t,s){return e(".selected-items").remove(),selectedItems=e("#the-list th input:checked").length,selectedItems>0?(selectedItems=0==selectedItems||1==selectedItems?wcp_settings.lang.ONE_ITEM:selectedItems+" ".wcp_settings.lang.ITEMS,e("<div class='selected-items'><span class='total-post-count'>"+selectedItems+" "+wcp_settings.lang.SELECTED+"</span></div>")):e("<div class='selected-items'><span class='total-post-count'>"+wcp_settings.lang.SELECT_ITEMS+"</span></div>")},start:function(t,s){e("body").addClass("no-hover-css")},cursor:"move",cursorAt:{left:0,top:0},stop:function(t,s){e(".selected-items").remove(),e("body").removeClass("no-hover-css")}}),e("#js-tree-menu .jstree-anchor:not(.ui-droppable)").droppable({accept:".wcp-move-file, .wcp-move-multiple, .attachments-browser li.attachment",hoverClass:"wcp-drop-hover",tolerance:"pointer",classes:{"ui-droppable-active":"ui-state-highlight"},drop:function(t,o){folderID=e(this).closest("li.jstree-node").attr("id"),o.draggable.hasClass("wcp-move-multiple")?e(".wp-list-table input:checked").length&&(chkStr="",e(".wp-list-table input:checked").each((function(){chkStr+=e(this).val()+","})),s=Y(folderID,"nonce"),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:s,status:wcp_settings.taxonomy_status,taxonomy:m,post_status:wcp_settings.post_status},method:"post",success:function(t){"1"==(t=e.parseJSON(t)).status?(W(),Q()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})):o.draggable.hasClass("wcp-move-file")?(postID=o.draggable[0].attributes["data-id"].nodeValue,s=Y(folderID,"nonce"),chkStr=postID+",",e(".wp-list-table input:checked").each((function(){e(this).val()!=postID&&(chkStr+=e(this).val()+",")})),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:s,status:wcp_settings.taxonomy_status,taxonomy:m,post_status:wcp_settings.post_status},method:"post",success:function(t){"1"==(t=e.parseJSON(t)).status?(W(),Q()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})):o.draggable.hasClass("attachment")&&(chkStr=o.draggable[0].attributes["data-id"].nodeValue,s=Y(folderID,"nonce"),e(".attachments-browser li.attachment.selected").length>1&&(chkStr="",e(".attachments-browser li.attachment.selected").each((function(){chkStr+=e(this).data("id")+","}))),j=chkStr,e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:s,status:wcp_settings.taxonomy_status,taxonomy:m,post_status:wcp_settings.post_status},method:"post",success:function(e){W(),Q()}}))}}),e(".un-categorised-items:not(.ui-droppable)").droppable({accept:".wcp-move-file, .wcp-move-multiple, .attachments-browser li.attachment",hoverClass:"wcp-hover-list",tolerance:"pointer",classes:{"ui-droppable-active":"ui-state-highlight"},drop:function(t,o){folderID=-1,s=wcp_settings.nonce,o.draggable.hasClass("wcp-move-multiple")?e(".wp-list-table input:checked").length&&(chkStr="",e(".wp-list-table input:checked").each((function(){chkStr+=e(this).val()+","})),_e(chkStr)):o.draggable.hasClass("wcp-move-file")?(postID=o.draggable[0].attributes["data-id"].nodeValue,chkStr=postID+",",e(".wp-list-table input:checked").each((function(){postID!=e(this).val()&&(chkStr+=e(this).val()+",")})),_e(chkStr)):o.draggable.hasClass("attachment")&&(chkStr=o.draggable[0].attributes["data-id"].nodeValue,e(".attachments-browser li.attachment.selected").length>1&&(chkStr="",e(".attachments-browser li.attachment.selected").each((function(){chkStr+=e(this).data("id")+","}))),j=chkStr,_e(chkStr))}}),e(".attachments-browser li.attachment:not(.ui-draggable)").draggable({revert:"invalid",containment:"document",helper:function(t,s){return e(".selected-items").remove(),selectedItems=e(".attachments-browser li.attachment.selected").length,selectedItems=0==selectedItems||1==selectedItems?"1 Item":selectedItems+" Items",e("<div class='selected-items'><span class='total-post-count'>"+selectedItems+" Selected</span></div>")},start:function(t,s){e("body").addClass("no-hover-css")},cursor:"move",cursorAt:{left:0,top:0},stop:function(t,s){e(".selected-items").remove(),e("body").removeClass("no-hover-css")}}),e(".tree-structure .folder-item:not(.ui-droppable)").droppable({accept:".wcp-move-file, .wcp-move-multiple, .attachments-browser li.attachment",hoverClass:"wcp-drop-hover-list",tolerance:"pointer",classes:{"ui-droppable-active":"ui-state-highlight"},drop:function(t,o){e("body").removeClass("no-hover-css"),folderID=e(this).data("id"),o.draggable.hasClass("wcp-move-multiple")?(s=Y(folderID,"nonce"),e(".wp-list-table input:checked").length&&(chkStr="",e(".wp-list-table input:checked").each((function(){chkStr+=e(this).val()+","})),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:s,status:wcp_settings.taxonomy_status,taxonomy:m,post_status:wcp_settings.post_status},method:"post",success:function(e){W(),ue(),Q()}}))):o.draggable.hasClass("wcp-move-file")?(postID=o.draggable[0].attributes["data-id"].nodeValue,s=Y(folderID,"nonce"),chkStr=postID+",",e(".wp-list-table input:checked").each((function(){e(this).val()!=postID&&(chkStr+=e(this).val()+",")})),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:s,status:wcp_settings.taxonomy_status,taxonomy:m,post_status:wcp_settings.post_status},method:"post",success:function(e){W(),ue(),Q()}})):o.draggable.hasClass("attachment")&&(chkStr=o.draggable[0].attributes["data-id"].nodeValue,s=Y(folderID,"nonce"),e(".attachments-browser li.attachment.selected").length>1&&(chkStr="",e(".attachments-browser li.attachment.selected").each((function(){chkStr+=e(this).data("id")+","}))),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:s,status:wcp_settings.taxonomy_status,taxonomy:m,post_status:wcp_settings.post_status},method:"post",success:function(e){W(),ue(),Q()}}))}}),e(".sticky-folders > ul > li > a:not(.ui-droppable)").droppable({accept:".wcp-move-file, .wcp-move-multiple, .attachments-browser li.attachment",hoverClass:"wcp-drop-hover",tolerance:"pointer",classes:{"ui-droppable-active":"ui-state-highlight"},drop:function(t,o){folderID=e(this).closest("li").data("folder-id"),o.draggable.hasClass("wcp-move-multiple")?e(".wp-list-table input:checked").length&&(chkStr="",e(".wp-list-table input:checked").each((function(){chkStr+=e(this).val()+","})),s=Y(folderID,"nonce"),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:s,status:wcp_settings.taxonomy_status,taxonomy:m,post_status:wcp_settings.post_status},method:"post",success:function(t){"1"==(t=e.parseJSON(t)).status?(W(),ue(),Q()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})):o.draggable.hasClass("wcp-move-file")?(postID=o.draggable[0].attributes["data-id"].nodeValue,s=Y(folderID,"nonce"),chkStr=postID+",",e(".wp-list-table input:checked").each((function(){e(this).val()!=postID&&(chkStr+=e(this).val()+",")})),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:s,status:wcp_settings.taxonomy_status,taxonomy:m,post_status:wcp_settings.post_status},method:"post",success:function(t){"1"==(t=e.parseJSON(t)).status?(W(),ue(),Q()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})):o.draggable.hasClass("attachment")&&(chkStr=o.draggable[0].attributes["data-id"].nodeValue,s=Y(folderID,"nonce"),e(".attachments-browser li.attachment.selected").length>1&&(chkStr="",e(".attachments-browser li.attachment.selected").each((function(){chkStr+=e(this).data("id")+","}))),j=chkStr,e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:folderID,nonce:s,status:wcp_settings.taxonomy_status,taxonomy:m,post_status:wcp_settings.post_status},method:"post",success:function(e){W(),ue(),Q()}}))}})),fe()}function Q(){"yes"==wcp_settings.useFolderUndo&&(e("#do-undo").addClass("active"),e(".undo-folder-action").removeClass("disabled"),setTimeout((function(){e("#do-undo").removeClass("active"),e(".undo-folder-action").addClass("disabled")}),parseInt(wcp_settings.defaultTimeout)))}function z(){e("#js-tree-menu .jstree-node").each((function(){var t=parseInt(e(this).data("count"));e(".jstree-node[id='"+e(this).attr("id")+"'] > a span.premio-folder-count").text(t)})),e("span.premio-folder-count").each((function(){""==e(this).text()&&e(this).text(0)})),""!=m&&0!=m&&e(".jstree-node[id='"+m+"']").length&&(e("#js-tree-menu").jstree("select_node",m),e(".sticky-folders .sticky-folder-"+m+" a").length&&e(".sticky-folders .sticky-folder-"+m+" a").addClass("active-item")),e(".ajax-preloader").hide(),e(".js-tree-data").show(),Z(),me(),e(".sticky-folders ul > li").length>0&&e(".sticky-folders").addClass("active"),G()}function Y(e,t){if(y.length>0)for(i=0;i<y.length;i++)if(parseInt(y[i].folder_id)==parseInt(e))return y[i][t];return""}function K(e){if(y.length>0)for(i=0;i<y.length;i++)if(parseInt(y[i].folder_id)==parseInt(e))return i;return null}function W(){if(e(".media-toolbar").hasClass("media-toolbar-mode-select")&&e("ul.attachments li.selected").length&&(e("ul.attachments li.selected").trigger("click"),e(".select-mode-toggle-button").trigger("click")),""!=j&&(e("#js-tree-menu a.jstree-clicked").length>0||"-1"==m)){if(e("#media-attachment-taxonomy-filter").length){j=j.split(",");for(var t=0;t<j.length;t++)""!=j[t]&&e(".attachments-browser li[data-id='"+j[t]+"']").remove()}j=""}if(e("#media-attachment-taxonomy-filter").length)ye(0);else if(e.ajax({url:wcp_settings.ajax_url,data:{type:wcp_settings.post_type,action:"get_folders_default_list",post_status:wcp_settings.post_status},method:"post",success:function(t){t=e.parseJSON(t),e(".header-posts .total-count").text(t.total_items),e(".un-categorised-items .total-count").text(t.empty_items),b=t.taxonomies,fe()}}),e(".folder-loader-ajax").addClass("active"),e("#folder-posts-filter").length)e("#folder-posts-filter").load(k+"&paged="+T+" #posts-filter",(function(){var t={Title:"",Url:k+"&paged="+T};history.pushState(t,t.Title,t.Url),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),G(),X(),pe()}));else{var s=null!==(o=new RegExp("[?&]"+"paged"+"=([^&#]*)").exec(window.location.search))&&(o[1]||0);s=!1===s?k+"&paged="+T:k,e("#wpbody").load(s+" #wpbody-content",!1,(function(t){var o={Title:"",Url:s};k=s,history.pushState(o,o.Title,o.Url),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),G(),pe(),"object"==typeof inlineEditPost&&(inlineEditPost.init(),e("#the-list").on("click",".editinline",(function(){e(this).attr("aria-expanded","true"),inlineEditPost.edit(this)})),e(document).on("click",".inline-edit-save .save",(function(){var t=e(this).closest("tr").attr("id");t=(t=t.replace("edit-","")).replace("post-",""),inlineEditPost.save(t)})),e(document).on("click",".inline-edit-save .cancel",(function(){var t=e(this).closest("tr").attr("id");t=(t=t.replace("edit-","")).replace("post-",""),inlineEditPost.revert(t)})),q())}))}var o;we()}function X(){e(".form-loader-count").css("width","0"),"object"==typeof inlineEditPost&&(inlineEditPost.init(),e("#the-list").on("click",".editinline",(function(){e(this).attr("aria-expanded","true"),inlineEditPost.edit(this)})),e(document).on("click",".inline-edit-save .save",(function(){var t=e(this).closest("tr").attr("id");t=(t=t.replace("edit-","")).replace("post-",""),inlineEditPost.save(t)})),e(document).on("click",".inline-edit-save .cancel",(function(){var t=e(this).closest("tr").attr("id");t=(t=t.replace("edit-","")).replace("post-",""),inlineEditPost.revert(t)})),q()),"attachment"==wcp_settings.post_type&&(e(".move-to-folder-top").length||e("#bulk-action-selector-top").append("<option class='move-to-folder-top' value='move_to_folder'>Move to Folder</option>"),e(".move-to-folder-bottom").length||e("#bulk-action-selector-bottom").append("<option class='move-to-folder-bottom' value='move_to_folder'>Move to Folder</option>")),G()}function q(){"product_folder"==wcp_settings.custom_type&&"product"==wcp_settings.post_type&&"object"==typeof woocommerce_quick_edit&&(e("#the-list").on("click",".editinline",(function(){var t=e(this).closest("tr").attr("id");t=t.replace("post-","");var s=jQuery("#wholesale_prices_inline_"+t),o=s.find(".product_base_currency");s.find(".whole_price").each((function(e){if(o.length>0)if(jQuery(this).attr("data-currencyCode")==o.text()){var t=jQuery('input[name="'+jQuery(this).attr("data-wholesalePriceKeyWithCurrency")+'"]',".inline-edit-row");t.length<=0&&(t=jQuery('input[name="'+jQuery(this).attr("id")+'"]',".inline-edit-row")),t.val(jQuery(this).text()),t.attr("placeholder",""),t.siblings(".title").html(t.siblings(".title").html()+" <em><b>Base Currency</b></em>"),t.attr("name",jQuery(this).attr("id"));var s=t.closest(".section-container");t.closest("label").detach().prependTo(s)}else jQuery('input[name="'+jQuery(this).attr("id")+'"]',".inline-edit-row").val(jQuery(this).text());else jQuery('input[name="'+jQuery(this).attr("id")+'"]',".inline-edit-row").val(jQuery(this).text())}));var a=e("#woocommerce_inline_"+t),n=a.find(".sku").text(),i=a.find(".regular_price").text(),r=a.find(".sale_price ").text(),l=a.find(".weight").text(),c=a.find(".length").text(),d=a.find(".width").text(),p=a.find(".height").text(),u=a.find(".shipping_class").text(),m=a.find(".visibility").text(),f=a.find(".stock_status").text(),h=a.find(".stock").text(),_=a.find(".featured").text(),g=a.find(".manage_stock").text(),v=a.find(".menu_order").text(),w=a.find(".tax_status").text(),j=a.find(".tax_class").text(),y=a.find(".backorders").text(),k=a.find(".product_type").text(),b=i.replace(".",woocommerce_admin.mon_decimal_point),x=r.replace(".",woocommerce_admin.mon_decimal_point);e('input[name="_sku"]',".inline-edit-row").val(n),e('input[name="_regular_price"]',".inline-edit-row").val(b),e('input[name="_sale_price"]',".inline-edit-row").val(x),e('input[name="_weight"]',".inline-edit-row").val(l),e('input[name="_length"]',".inline-edit-row").val(c),e('input[name="_width"]',".inline-edit-row").val(d),e('input[name="_height"]',".inline-edit-row").val(p),e('select[name="_shipping_class"] option:selected',".inline-edit-row").attr("selected",!1).trigger("change"),e('select[name="_shipping_class"] option[value="'+u+'"]').attr("selected","selected").trigger("change"),e('input[name="_stock"]',".inline-edit-row").val(h),e('input[name="menu_order"]',".inline-edit-row").val(v),e('select[name="_tax_status"] option, select[name="_tax_class"] option, select[name="_visibility"] option, select[name="_stock_status"] option, select[name="_backorders"] option').prop("selected",!1).removeAttr("selected");var C="variable"===k;e('select[name="_stock_status"] ~ .wc-quick-edit-warning',".inline-edit-row").toggle(C),e('select[name="_stock_status"] option[value="'+(C?"":f)+'"]',".inline-edit-row").attr("selected","selected"),e('select[name="_tax_status"] option[value="'+w+'"]',".inline-edit-row").attr("selected","selected"),e('select[name="_tax_class"] option[value="'+j+'"]',".inline-edit-row").attr("selected","selected"),e('select[name="_visibility"] option[value="'+m+'"]',".inline-edit-row").attr("selected","selected"),e('select[name="_backorders"] option[value="'+y+'"]',".inline-edit-row").attr("selected","selected"),"yes"===_?e('input[name="_featured"]',".inline-edit-row").prop("checked",!0):e('input[name="_featured"]',".inline-edit-row").prop("checked",!1);var I=a.find(".product_is_virtual").text(),D="external"!==k,S="external"!==k&&"grouped"!==k;e(".stock_fields, .manage_stock_field, .stock_status_field, .backorder_field").show(),S?"yes"===g?(e(".stock_qty_field, .backorder_field",".inline-edit-row").show().removeAttr("style"),e(".stock_status_field").hide(),e(".manage_stock_field input").prop("checked",!0)):(e(".stock_qty_field, .backorder_field",".inline-edit-row").hide(),e(".stock_status_field").show().removeAttr("style"),e(".manage_stock_field input").prop("checked",!1)):D?e(".stock_fields, .manage_stock_field, .backorder_field").hide():e(".stock_fields, .manage_stock_field, .stock_status_field, .backorder_field").hide(),"simple"===k||"external"===k?e(".price_fields",".inline-edit-row").show().removeAttr("style"):e(".price_fields",".inline-edit-row").hide(),"yes"===I?e(".dimension_fields",".inline-edit-row").hide():e(".dimension_fields",".inline-edit-row").show().removeAttr("style"),e('input[name="comment_status"]').parent().find(".checkbox-title").text(woocommerce_quick_edit.strings.allow_reviews)})),e("#the-list").on("change",'.inline-edit-row input[name="_manage_stock"]',(function(){e(this).is(":checked")?(e(".stock_qty_field, .backorder_field",".inline-edit-row").show().removeAttr("style"),e(".stock_status_field").hide()):(e(".stock_qty_field, .backorder_field",".inline-edit-row").hide(),e(".stock_status_field").show().removeAttr("style"))})))}function B(){if(y.length){var t=0;e("#js-tree-menu li.jstree-node").each((function(){folderPostId=K(e(this).attr("id")),null!=folderPostId&&(1==y[folderPostId].is_high?e(this).addClass("is-high"):e(this).removeClass("is-high"),1==y[folderPostId].is_locked?(e(this).addClass("is-locked"),t++):e(this).removeClass("is-locked"),1==y[folderPostId].is_sticky?e(this).addClass("is-sticky"):e(this).removeClass("is-sticky"),y[folderPostId].slug==wcp_settings.default_folder?e(this).addClass("is-current"):e(this).removeClass("is-current"))})),ie(),t>0&&t==e("#js-tree-menu li.jstree-node").length?e(".lock-unlock-all-folders").addClass("all-folder-locked").removeClass("open-folders").attr("data-folder-tooltip","Use this to lock a folder's position so it cannot be moved\n\n Click to Unlock all folders"):e(".lock-unlock-all-folders").addClass("open-folders").removeClass("all-folder-locked").attr("data-folder-tooltip","Use this to lock a folder's position so it cannot be moved\n\n Click to Lock all folders")}me()}function G(){if(B(),folderId=0,e(".tree-structure ul").html(""),folderStatus=!0,e(".jstree-clicked").length&&(folderID=e(".jstree-clicked").closest(".jstree-node").attr("id"),e(".jstree-node[id='"+folderID+"'] > ul.jstree-children > li.jstree-node").length?(folderStatus=!1,e(".jstree-node[id='"+folderID+"'] > ul.jstree-children > li.jstree-node").each((function(){fID=e(this).attr("id"),fName=e.trim(e("#js-tree-menu").jstree(!0).get_node(fID).text),liHtml=D.replace(/__folder_id__/g,fID),liHtml=liHtml.replace(/__folder_name__/g,fName),selectedClass=e(this).hasClass("is-high")?"is-high":"",e(this).hasClass("is-locked")&&(selectedClass+=" is-locked"),liHtml=liHtml.replace(/__append_class__/g,selectedClass),e(".tree-structure ul").append(liHtml)}))):e(".jstree-node[id='"+folderID+"']").closest("ul").hasClass("jstree-container-ul")||(folderStatus=!1)),folderStatus&&e("#js-tree-menu > ul > li.jstree-node").each((function(){fID=e(this).attr("id"),fName=e.trim(e("#js-tree-menu").jstree(!0).get_node(fID).text),liHtml=D.replace(/__folder_id__/g,fID),liHtml=liHtml.replace(/__folder_name__/g,fName),selectedClass=e(this).hasClass("is-high")?"is-high":"",e(this).hasClass("is-locked")&&(selectedClass+=" is-locked"),liHtml=liHtml.replace(/__append_class__/g,selectedClass),e(".tree-structure ul").append(liHtml)})),pe(),"attachment"==wcp_settings.post_type&&(e(".move-to-folder-top").length||e("#bulk-action-selector-top").append("<option class='move-to-folder-top' value='move_to_folder'>Move to Folder</option>"),e(".move-to-folder-bottom").length||e("#bulk-action-selector-bottom").append("<option class='move-to-folder-bottom' value='move_to_folder'>Move to Folder</option>")),e(".sticky-folders .active-item").removeClass("active-item"),e("#js-tree-menu li.jstree-node.active-item").length){var t=e("#js-tree-menu li.jstree-node.active-item").data("folder-id");e(".sticky-folders .sticky-folder-"+t+" a").addClass("active-item")}J(),we()}function Z(){contentHeight=e(window).height()-e("#wpadminbar").height()-e(".sticky-wcp-custom-form").height()-40,e("#custom-scroll-menu").height(contentHeight),e("#custom-scroll-menu").overlayScrollbars({resize:"none",sizeAutoCapable:!0,autoUpdateInterval:33,x:"scroll",clipAlways:!1,y:"scroll"}),e(".custom-scroll-menu").hasClass("hor-scroll")&&(jQuery("#custom-scroll-menu .os-viewport").on("scroll",(function(){$()})),$())}function $(){jQuery("#js-tree-menu span.folder-actions").css("right",jQuery("#custom-scroll-menu .horizontal-scroll-menu").width()-jQuery("#custom-scroll-menu .os-viewport").width()-e("#custom-scroll-menu .os-viewport").scrollLeft()-10)}function ee(t,s,o,a){e.ajax({data:{folder_id:t,nonce:s,action:"download_folders_data",total_files:o,page:a},method:"post",url:wcp_settings.ajax_url,success:function(t){e(".folder-download-loading").hide(),(t=e.parseJSON(t)).status?parseInt(t.files)>parseInt(t.scanned)?(e(".folder-download-loading").show(),ee(t.folder_id,t.nonce,parseInt(t.files),parseInt(t.page)+1)):(e(".folder-download-loading").hide(),te(t.file_url,t.file_name)):alert(t.message)},error:function(){e(".folder-download-loading").hide(),alert("Something went wrong, not able to create zip file")}})}function te(e,t){fetch(e).then((e=>e.blob())).then((e=>{const s=document.createElement("a");s.href=URL.createObjectURL(e),s.download=t,s.click()})).catch(console.error)}function se(){G()}function oe(){if(0==o&&a>=10)return e("#folder-limitation-message").html("You've reached the 10 folder limitation!"),e("#no-more-folder-credit").show(),!1;e("#save-folder-data").text(wcp_settings.lang.SUBMIT),e(".folder-form-errors").removeClass("active"),e("#add-update-folder-name").val(""),h&&(_=g,e("#add-update-folder-name").val(e.trim(e("#js-tree-menu").jstree(!0).get_node(g).text)+" #2"),g=e("#"+g+"_anchor").closest(".jstree-node").parent().parent().hasClass("jstree-node")?e("#"+g+"_anchor").closest(".jstree-node").parent().parent().attr("id"):0),e("#add-update-folder").removeClass("disabled"),e("#add-update-folder").show(),e("#add-update-folder-name").focus(),e(".dynamic-menu").remove()}function ae(){folderName=e.trim(e("#js-tree-menu").jstree(!0).get_node(g).text),parentID=e("#wcp_folder_"+g).closest("li.jstree-node").data("folder-id"),parentID==t&&(parentID=0),e("#update-folder-data").text("Submit"),e(".folder-form-errors").removeClass("active"),e("#update-folder-item-name").val(folderName),e("#update-folder-item").removeClass("disabled"),e("#update-folder-item").show(),e("#update-folder-item-name").focus(),e(".dynamic-menu").remove()}function ne(t){var s=wcp_settings.lang.DELETE_FOLDER_MESSAGE,o=wcp_settings.lang.ITEM_NOT_DELETED;if(w=!1,1==t&&e("#menu-checkbox").is(":checked")){var a=0;if(e("#js-tree-menu input.checkbox:checked").each((function(){e(this).closest("li.jstree-node").hasClass("is-locked")||a++})),0==a)return;if(w=!0,0==e("#js-tree-menu input.checkbox:checked").length)return e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(wcp_settings.lang.SELECT_AT_LEAST_ONE_FOLDER),void e("#error-folder-popup").show();e("#js-tree-menu input.checkbox:checked").length>1&&(s=wcp_settings.lang.DELETE_FOLDERS_MESSAGE,o=wcp_settings.lang.ITEMS_NOT_DELETED)}e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#remove-folder-item").text(wcp_settings.lang.YES_DELETE_IT),e("#remove-folder-message").text(s),e("#remove-folder-notice").text(o),e("#confirm-remove-folder").show(),e("#remove-folder-item").focus()}function ie(){e("#custome_folder_color_css").remove();var t="<style id='custome_folder_color_css'>";e(y).each((function(e,s){""!=s.has_color&&(t+="li.jstree-node[id='"+s.folder_id+"'] .pfolder-folder-close {color: "+s.has_color+"!important;}")})),t+="</style>",e("head").append(t)}function re(){e(u).jstree({core:{cache:!1,animation:0,max_depth:r?"-1":1,check_callback:function(t,s,o,a,n){if(e("*").removeClass("drag-bot").removeClass("drag-in").removeClass("drag-up"),("move_node"===t||"copy_node"===t)&&n&&n.dnd)switch(n.pos){case"a":n.origin.get_node(n.ref,!0).addClass("drag-bot"),nodeId=e(".drag-bot").attr("id"),e("#jstree-dnd").text("Below "+e.trim(e("#js-tree-menu").jstree(!0).get_node(nodeId).text));break;case"i":if(!r)return!1;n.origin.get_node(n.ref,!0).addClass("drag-in"),nodeId=e(".drag-in").attr("id"),e("#jstree-dnd").text("Inside "+e.trim(e("#js-tree-menu").jstree(!0).get_node(nodeId).text));break;case"b":n.origin.get_node(n.ref,!0).addClass("drag-up"),nodeId=e(".drag-up").attr("id"),e("#jstree-dnd").text("Above "+e.trim(e("#js-tree-menu").jstree(!0).get_node(nodeId).text));break;default:e("#jstree-dnd").text(e("#jstree-dnd").data("txt"))}return!0}},dnd:{is_draggable:function(t){return"view-only"!=U&&(folderMoveId=t[0].id,!e(".jstree-node[id='"+folderMoveId+"']").length||!e(".jstree-node[id='"+folderMoveId+"']").hasClass("is-locked"))}},data:{cache:!1},select_node:!1,search:{show_only_matches:!0,case_sensitive:!1,fuzzy:!1},plugins:["dnd","search","contextmenu"],contextmenu:{select_node:0,show_at_node:0,items:function(){return{}}}}).bind("ready.jstree",(function(){z(),J(),me(),we()})).bind("after_open.jstree",(function(){J()})).bind("open_all.jstree",(function(){J()})).bind("create_node.jstree",(function(){J()})).bind("delete_node.jstree",(function(){J()})).bind("close_all.jstree",(function(){J()})).bind("after_close.jstree",(function(){J()})).bind("move_node.jstree",(function(t,s){"#"!=s.node.parent&&e("#js-tree-menu").jstree("open_node",s.node.parent),z(),folderMoveId=s.node.id,orderString="",e("#js-tree-menu .jstree-node[id='"+folderMoveId+"']").closest("ul").children().each((function(){"undefined"!=e(this).attr("id")&&(orderString+=e(this).attr("id")+",")})),e("#"+folderMoveId+"_anchor").closest(".jstree-node").parent().parent().hasClass("jstree-node")?parentID=e("#"+folderMoveId+"_anchor").closest(".jstree-node").parent().parent().attr("id"):parentID=0,""!=orderString&&(l=s.old_parent,c=s.old_position,d=folderMoveId,e(".form-loader-count").css("width","100%"),e.ajax({url:wcp_settings.ajax_url,data:{term_ids:orderString,action:"wcp_save_folder_order",type:wcp_settings.post_type,nonce:wcp_settings.nonce,term_id:folderMoveId,parent_id:parentID},method:"post",success:function(t){"1"==(t=e.parseJSON(t)).status?(e("#wcp_folder_parent").html(t.options),e(".form-loader-count").css("width","0"),W(),fe(),J(),G()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}}))}))}function le(){var t=e.trim(e("#folder-search").val());e("#js-tree-menu").jstree("search",t)}function ce(t){e.ajax({url:wcp_settings.ajax_url,type:"post",data:"action=save_folder_last_status&post_type="+wcp_settings.post_type+"&post_id="+t+"&nonce="+wcp_settings.nonce,cache:!1,async:!1,success:function(){}})}function de(){setTimeout((function(){if(currentStatus=!0,e("#js-tree-menu .jstree-node.jstree-leaf").length==e("#js-tree-menu .jstree-node").length)e("#expand-collapse-list").removeClass("all-open"),e("#expand-collapse-list").attr("data-folder-tooltip",wcp_settings.lang.EXPAND),e("#expand-collapse-list .text").text(wcp_settings.lang.EXPAND);else{var t=e("#js-tree-menu .jstree-node.jstree-closed").length+e("#js-tree-menu .jstree-node.jstree-open").length;e("#js-tree-menu .jstree-node.jstree-closed").length==t?(e("#expand-collapse-list").removeClass("all-open"),e("#expand-collapse-list").attr("data-folder-tooltip",wcp_settings.lang.EXPAND),e("#expand-collapse-list .text").text(wcp_settings.lang.EXPAND)):(e("#expand-collapse-list").addClass("all-open"),e("#expand-collapse-list").attr("data-folder-tooltip",wcp_settings.lang.COLLAPSE),e("#expand-collapse-list .text").text(wcp_settings.lang.COLLAPSE))}}),500),J()}function pe(){0==e(".tree-structure-content .tree-structure li").length?e(".tree-structure-content").hide():(e(".tree-structure-content").show(),oldHeight=e(".tree-structure-content .tree-structure").height(),e(".tree-structure-content .tree-structure").height("auto"),e(".tree-structure-content .tree-structure").height()>56?e(".folders-toggle-button").show():e(".folders-toggle-button").hide(),newHeight=e(".tree-structure-content .tree-structure").height(),e(".tree-structure-content .tree-structure").attr("data-height",newHeight),e(".tree-structure-content").hasClass("active")?(e(".tree-structure-content .tree-structure").height(newHeight),e(".tree-structure-content .tree-structure").attr("data-height",newHeight)):e(".tree-structure-content .tree-structure").height(oldHeight))}function ue(){e(".form-loader-count").css("width","0px"),e(".folder-loader-ajax").addClass("active"),e(".folder-loader-ajax img").removeClass("active"),e(".folder-loader-ajax svg#successAnimation").addClass("active").addClass("animated"),setTimeout((function(){e(".folder-loader-ajax").removeClass("active"),e(".folder-loader-ajax img").addClass("active"),e(".folder-loader-ajax svg#successAnimation").removeClass("active").removeClass("animated")}),2e3)}function me(){e(".sticky-folders > ul").html("");var t="";if(e("#js-tree-menu li.jstree-node.is-sticky").each((function(){var s=e(this).attr("id"),o=e.trim(e("#js-tree-menu").jstree(!0).get_node(s).text),a=e("li.jstree-node[id='"+s+"'] > a span.premio-folder-count").text(),n=e("li.jstree-node[id='"+s+"']").hasClass("is-high")?" is-high ":"",i=e("li.jstree-node[id='"+s+"']").hasClass("is-locked")?" is-locked ":"";t+="<li data-folder-id='"+s+"' class='sticky-fldr "+n+" "+i+" sticky-folder-"+s+"'><a href='javascript:;'><span class='folder-title'>"+o+"</span><span class='folder-actions'><span class='update-inline-record'><i class='pfolder-edit-folder'></i></span><span class='star-icon'><i class='pfolder-star'></i></span><span class='dashicons dashicons-lock'></span><span class='premio-folder-count'>"+a+"</span></span></a></li>"})),e(".sticky-folders > ul").html(t),e(".jstree-anchor.jstree-clicked").length){var s=e(".jstree-anchor.jstree-clicked").closest("li.jstree-node").attr("id");e(".sticky-folders .sticky-folder-"+s+" a").addClass("active-item")}e(".sticky-folders > ul > li").length>0?e(".sticky-folders").addClass("active"):e(".sticky-folders").removeClass("active"),Z(),J()}function fe(){if(e("#media-attachment-taxonomy-filter").length&&(e("#media-attachment-taxonomy-filter").each((function(){folders_media_options.terms=b;var t=e(this);currentDDVal=e(this).val(),t.html("<option value='all'>All Folders</option><option value='unassigned'>(Unassigned)</option>"),lastFolderData=b;for(var s=0;s<b.length;s++)t.append("<option value='"+b[s].term_id+"'>"+b[s].name+" ("+b[s].trash_count+")</option>");0!=A?(e(".jstree-clicked").removeClass("jstree-clicked"),e("#js-tree-menu").jstree("select_node",A),t.val(A).trigger("change")):t.val(currentDDVal).trigger("change")})),e("select.folder_for_media").length)){var t=e("select.folder_for_media").val();e("select.folder_for_media option:not(:first-child):not(:last-child)").remove();for(var s=0;s<b.length;s++)e("select.folder_for_media option:last-child").before("<option value='"+b[s].term_id+"'>"+b[s].name+"</option>");""!=t&&e(".folder_for_media").val(t)}if(e(".wp-filter #media_folder").length)for(s=0;s<b.length;s++)e(".wp-filter #media_folder option[value='"+b[s].slug+"']").length&&e(".wp-filter #media_folder option[value='"+b[s].slug+"']").html(b[s].name+" ("+b[s].trash_count+")");for(s=0;s<b.length;s++)e(".jstree-node[id='"+b[s].term_id+"'] > a.jstree-anchor span.premio-folder-count").text(b[s].trash_count),e(".sticky-folder-"+b[s].term_id+" .premio-folder-count").text(b[s].trash_count);if(e("span.premio-folder-count").each((function(){""==e(this).text()&&e(this).text(0)})),e(".media-select-folder").length){for(e(".media-select-folder").html("<option value=''>Select Folder</option><option value='-1'>(Unassigned)</option>"),s=0;s<b.length;s++)e(".media-select-folder").append("<option value='"+b[s].term_id+"'>"+b[s].name+" ("+b[s].trash_count+")</option>");e(".media-select-folder").val("")}""!=m&&e("#wcp_folder_"+m).addClass("active-item"),f&&(e("#title_"+g).trigger("click"),f=!1),A=0}function he(){e("#bulk-action-selector-top, #bulk-action-selector-bottom").val("-1"),0==e(".wp-list-table tbody input[type='checkbox']:checked").length?alert(wcp_settings.lang.SELECT_ITEMS_TO_MOVE):(e("#bulk-move-folder").show(),e("#bulk-select").html("<option value=''>"+wcp_settings.lang.LOADING_FILES+"</option>"),e(".move-to-folder").attr("disabled",!0),e("#move-to-folder").prop("disabled",!0),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_get_default_list&active_id="+m,method:"post",success:function(t){if(t=e.parseJSON(t),e("#bulk-select").html("<option value=''>"+wcp_settings.lang.SELECT_FOLDER+"</option><option value='-1'>"+wcp_settings.lang.UNASSIGNED+"</option>"),e(".move-to-folder").prop("disabled",!1),e("#move-to-folder").prop("disabled",!1),1==t.status){var s=t.taxonomies;for(i=0;i<s.length;i++)e("#bulk-select").append("<option value='"+s[i].term_id+"'>"+s[i].name+"</option>")}}}))}function _e(t){""==m||0==m?(s=wcp_settings.nonce,e.ajax({url:wcp_settings.ajax_url,data:"post_id="+t+"&type="+wcp_settings.post_type+"&action=wcp_remove_post_folder&folder_id="+"-1&nonce="+s+"&status="+wcp_settings.taxonomy_status+"&taxonomy="+m,method:"post",success:function(e){W(),Q()}})):e.ajax({url:wcp_settings.ajax_url,data:{post_id:t,action:"premio_check_for_other_folders",active_folder:m,type:wcp_settings.post_type,folder_id:-1,nonce:wcp_settings.nonce,status:wcp_settings.taxonomy_status,taxonomy:m},method:"post",success:function(t){-1==(t=e.parseJSON(t)).status?(e("#unassigned_folders").val(t.data.post_id),e("#confirm-your-change").show()):(W(),Q())}})}function ge(t,s){e(".form-loader-count").css("width","100%");var o=0;0==m&&(o=e("#js-tree-menu > ul > li").length);var a=[];"custom"==t&&e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0&&e("#js-tree-menu input.checkbox:checked").each((function(){a.push(parseInt(e(this).closest("li.jstree-node").attr("id")))})),e.ajax({url:wcp_settings.ajax_url,data:{copy_from:t,copy_to:s,action:"copy_premio_folders",nonce:wcp_settings.nonce,post_type:wcp_settings.post_type,folder_order:o,folders:a},method:"post",success:function(t){if(1==(t=e.parseJSON(t)).status&&(N=t.parent_id,t.data.length>0))for(var s=0;s<t.data.length;s++)ve(t.data[s]);ue()}})}function ve(t){var s={folder_id:t.term_id,folder_count:0,is_sticky:t.is_sticky,is_high:t.is_high,is_locked:t.is_locked,has_color:t.has_color,nonce:t.nonce,slug:t.slug,is_deleted:0};y.push(s);var o=t.title;if(o=o.replace(/\\/g,""),e("#js-tree-menu").jstree().create_node(t.parent_id,{id:t.term_id,text:" "+o},"last",(function(){e(".jstree-node[id='"+t.term_id+"']").attr("data-nonce",t.nonce),e(".jstree-node[id='"+t.term_id+"']").attr("data-slug",t.slug)})),t.child.length>0)for(var a=0;a<t.child.length;a++)ve(t.child[a]);B(),me(),W(),e(".folders-undo-notification").removeClass("active"),e("#paste-message").addClass("active"),setTimeout((function(){e("#paste-message").removeClass("active")}),5e3)}function we(){e(".cut-folder-action, .copy-folder-action, .paste-folder-action, .delete-folder-action").addClass("disabled"),e("#js-tree-menu .jstree-anchor.jstree-clicked").length&&(e(".copy-folder-action, .delete-folder-action").removeClass("disabled"),""!=O&&0!=O&&m!=O&&e(".paste-folder-action").removeClass("disabled"),e("#menu-checkbox").is(":checked")||e(".cut-folder-action").removeClass("disabled")),e(".all-posts").hasClass("active-item")&&""!=O&&0!=O&&"custom"!=O&&e(".paste-folder-action").removeClass("disabled"),(e("#menu-checkbox").is(":checked")||e("#menu-checkbox").is(":checked"))&&e("#js-tree-menu input.checkbox:checked").length>0&&e(".delete-folder-action").removeClass("disabled"),e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0&&e(".copy-folder-action").removeClass("disabled"),e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0&&e(".cut-folder-action").removeClass("disabled")}if(e(document).ready((function(){if(e(window).bind("popstate",(function(){window.location.reload()})),e(document).on("mouseover",".dynamic-folders .folder-tooltip",(function(){e("#custom-scroll-menu").addClass("hide-scroll-overflow")})).on("mouseleave",".dynamic-folders .folder-tooltip",(function(){e("#custom-scroll-menu").removeClass("hide-scroll-overflow")})),e(document).on("click",".subsubsub a",(function(t){if(e("#js-tree-menu .jstree-anchor.jstree-clicked").length){var s=Y(o=e("#js-tree-menu .jstree-anchor.jstree-clicked").closest(".jstree-node").attr("id"),"slug");if(""!=s)t.preventDefault(),a=(a=e(this).attr("href"))+"&"+wcp_settings.custom_type+"="+s,window.location=a}else if(e("#dynamic-tree-folders").length&&e("#dynamic-tree-folders .jstree-anchor.jstree-clicked").length){var o,a;if(""!=(o=e("#dynamic-tree-folders .jstree-anchor.jstree-clicked").closest(".jstree-node").attr("id")))t.preventDefault(),a=(a=e(this).attr("href"))+"&ajax_action=premio_dynamic_folders&dynamic_folder="+o+"_anchor",window.location=a}})),e(document).on("click",".view-switch > a",(function(t){if(""!=location.search)try{if(e(this).hasClass("view-grid")||e(this).hasClass("view-list"))var s=e(this).attr("href");t.preventDefault();var o=location.search.substring(1);const a=Object.fromEntries(new URLSearchParams(o));Object.keys(a).length&&e.each(a,(function(e,t){"mode"!=e&&"paged"!=e&&""!=t&&(s+="&"+e+"="+t)})),window.location=s}catch(e){}})),e(document).on("click",".folder-settings-btn > a",(function(t){t.stopPropagation(),e(".folder-settings-btn").toggleClass("active")})),e(document).on("click","body,html",(function(){e(".folder-settings-btn").removeClass("active")})),e(document).on("click",".folder-setting-menu",(function(e){e.stopPropagation()})),e(document).on("click","#unlock-all-folder",(function(){e("#unlock-all-folder-popup").show()})),e(document).on("click","#lock-all-folder",(function(){e("#lock-all-folder-popup").show()})),e(document).on("click",".lock-unlock-all-folders",(function(){e(this).hasClass("open-folders")?e("#lock-all-folder-popup").show():e("#unlock-all-folder-popup").show()})),e(document).on("click",".lock-all-folder, .unlock-all-folder",(function(t){var s=0;e(this).hasClass("lock-all-folder")&&(s=1),e(".folder-settings-btn").removeClass("active"),e(".form-loader-count").css("width","100%"),t.preventDefault(),e("#unlock-all-folder-popup, #lock-all-folder-popup").hide();var o=[];e("#menu-checkbox").is(":checked")&&e("#js-tree-menu .checkbox:checked").each((function(){o.push(e(this).closest("li.jstree-node").attr("id"))})),e.ajax({url:wcp_settings.ajax_url,data:{post_type:wcp_settings.post_type,nonce:wcp_settings.nonce,action:"premio_lock_unlock_all_folders",lock_folders:s,folders:o},method:"post",success:function(t){if(t=e.parseJSON(t),e(".form-loader-count").css("width","0"),ue(),1==t.status)if(t.data.folders.length)for(var s=0;s<y.length;s++)-1!==e.inArray(String(y[s].folder_id),t.data.folders)&&(y[s].is_locked=1);else if(y.length>0)for(s=0;s<y.length;s++)y[s].is_locked=t.data.is_locked;B()}})})),e(document).on("change","#upload_media_folder",(function(){e("#upload_media_folder")[0].files.length&&(H=e("#upload_media_folder")[0].files,R=0,e("#upload_media_folder").prop("disabled",!0),jQuery(".folder-meter").css("width","0%"),jQuery(".media-folder-loader").show(),jQuery("#total_upload_files").text(H.length),jQuery("#current_upload_files").text(1),M())})),e("body").hasClass("jetpack-connected")&&!e("body").hasClass("mobile")&&!e("body").hasClass("folded")&&e("#adminmenuwrap").length){var p=parseInt(e("#adminmenuwrap").width());"rtl"==e("html").prop("dir")?e(".wcp-content").css("right",p):e(".wcp-content").css("left",p)}e(document).on("click","#collapse-button",(function(){setTimeout((function(){if(e("body").hasClass("jetpack-connected")&&!e("body").hasClass("mobile")&&!e("body").hasClass("folded")&&e("#adminmenuwrap").length){var t=parseInt(e("#adminmenuwrap").width());"rtl"==e("html").prop("dir")?e(".wcp-content").css("right",t):e(".wcp-content").css("left",t)}}),50)})),b=wcp_settings.taxonomies,o=parseInt(wcp_settings.is_key_active),a=parseInt(wcp_settings.folders),m=parseInt(wcp_settings.selected_taxonomy),n=parseInt(wcp_settings.hasStars),r=parseInt(wcp_settings.hasChildren),T=parseInt(wcp_settings.currentPage),x=parseInt(wcp_settings.hasValidLicense),y=wcp_settings.folder_settings,re(),Z(),e(document).ajaxComplete((function(e,t,s){var o=s.data;void 0!==o&&o.length&&-1!=o.indexOf("action=inline-save")&&W()}));var u="1"==wcp_settings.isRTL||1==wcp_settings.isRTL?"w":"e";e(".wcp-content").resizable({resizeHeight:!1,handles:u,minWidth:100,maxWidth:500,resize:function(t,s){var o=s.size.width;for(o<=275?e(".plugin-button").addClass("d-block"):e(".plugin-button").removeClass("d-block"),o<=245&&(o=245),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right",o+20+"px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left",o+20+"px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px - "+o+"px)"),newWidth=o-40,cssString="",classString="",i=0;i<=15;i++)classString+=" .space > .jstree-node >",currentWidth=newWidth-(13+20*i),cssString+="#js-tree-menu > "+classString+" .title { width: "+currentWidth+"px !important; } ",cssString+="#js-tree-menu > "+classString+" .dynamic-menu { left: "+(currentWidth-190)+"px !important; } ";e("#wcp-custom-style").html("<style>"+cssString+"</style>"),s.size.width<=185?(folderStatus="hide",e(".wcp-hide-show-buttons .toggle-buttons.show-folders").addClass("active"),e(".wcp-hide-show-buttons .toggle-buttons.hide-folders").removeClass("active"),e("#wcp-content").addClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right","20px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left","20px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px)")):e("#wcp-content").hasClass("hide-folders-area")&&(folderStatus="show",e(".wcp-hide-show-buttons .toggle-buttons.show-folders").removeClass("active"),e(".wcp-hide-show-buttons .toggle-buttons.hide-folders").addClass("active"),e("#wcp-content").addClass("no-transition"),e("#wcp-content").removeClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right",parseInt(wcp_settings.folder_width)+20+"px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left",parseInt(wcp_settings.folder_width)+20+"px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px - "+o+"px)"),setTimeout((function(){e("#wcp-content").removeClass("no-transition")}),250))},stop:function(t,o){var a=o.size.width;o.size.width<=275?e(".plugin-button").addClass("d-block"):e(".plugin-button").removeClass("d-block"),a<=245&&(a=245),o.size.width<=185?(folderStatus="hide",e(".wcp-hide-show-buttons .toggle-buttons.show-folders").addClass("active"),e(".wcp-hide-show-buttons .toggle-buttons.hide-folders").removeClass("active"),e("#wcp-content").addClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right","20px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left","20px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px)"),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_change_folder_display_status&status="+folderStatus+"&nonce="+s,method:"post",success:function(e){}})):e("#wcp-content").hasClass("hide-folders-area")&&(folderStatus="show",e(".wcp-hide-show-buttons .toggle-buttons.show-folders").removeClass("active"),e(".wcp-hide-show-buttons .toggle-buttons.hide-folders").addClass("active"),e("#wcp-content").addClass("no-transition"),e("#wcp-content").removeClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right",parseInt(wcp_settings.folder_width)+20+"px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left",parseInt(wcp_settings.folder_width)+20+"px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px - "+a+"px)"),setTimeout((function(){e("#wcp-content").removeClass("no-transition")}),250)),s=wcp_settings.nonce,wcp_settings.folder_width=o.size.width,e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_change_post_width&width="+a+"&nonce="+s,method:"post",success:function(e){}}),o.size.width<=245&&(e(".wcp-content").width(245),wcp_settings.folder_width=245)}}),"admin"!=U&&"view-edit"!=U||(e(document).on("contextmenu","#js-tree-menu .jstree-anchor",(function(t){return S=t.pageX,E=t.pageY,e(this).find("span.folder-inline-edit").trigger("click"),!1})),e(document).on("click","#js-tree-menu .folder-actions span.folder-inline-edit",(function(o){if(o.stopImmediatePropagation(),o.stopPropagation(),o.preventDefault(),0!=wcp_settings.can_manage_folder){isHigh=e(this).closest("li.jstree-node").hasClass("is-high"),isLocked=e(this).closest("li.jstree-node").hasClass("is-locked"),isSticky=e(this).closest("li.jstree-node").hasClass("is-sticky"),isDefault=e(this).closest("li.jstree-node").hasClass("is-current"),isStickyClass=!!isSticky,e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu");var a,i=e(this).closest("li").prop("id");if(menuHtml="<div class='dynamic-menu "+(isLocked?"is-locked":"")+" "+(x?"":"no-key")+"' data-id='"+e(this).closest("li").prop("id")+"'><ul>","admin"==U&&(menuHtml+=x||r?"<li class='new-folder'><a href='javascript:;'><span class=''><i class='pfolder-add-folder'></i></span>"+wcp_settings.lang.NEW_SUB_FOLDER+"</a></li>":"<li class='new-folder-pro'><a href='javascript:;'><span class=''><i class='pfolder-add-folder'></i></span>"+wcp_settings.lang.ACTIVATE.NEW_SUB_FOLDER+"</a></li>"),menuHtml+="<li class='rename-folder'><a href='javascript:;'><span class=''><i class='pfolder-edit'></i></span>"+wcp_settings.lang.RENAME+"</a></li>",menuHtml+="<li class='color-folder'><a href='javascript:;'><span class=''><span class='dashicons dashicons-art'></span></span>"+wcp_settings.lang.CHANGE_COLOR+"<span class='dashicons dashicons-arrow-right-alt2'></span></a>",menuHtml+="<ul class='color-selector'>",menuHtml+="<li class='color-selector-ul'>",e(wcp_settings.selected_colors).each((function(e,t){menuHtml+="<span class='folder-color-option' data-color='"+t+"' style='background-color:"+t+"'></span>"})),parseInt(wcp_settings.hasValidLicense)&&(menuHtml+="<span><input type='text' class='custom-folder-icon-color' /></span>"),menuHtml+="</li>",parseInt(wcp_settings.hasValidLicense)||(menuHtml+="<li><a href='"+wcp_settings.register_url+"' target='_blank' class='folder-color-default'>"+wcp_settings.lang.ACTIVATE_COLOR_KEY+"</a></li>"),menuHtml+="<li><a href='javascript:;' class='folder-color-default'>"+wcp_settings.lang.REMOVE_COLOR+"</a></li>",menuHtml+="</ul>",menuHtml+="</li>",menuHtml+=x?"<li class='sticky-folder'><a href='javascript:;'><span class='sticky-pin'><i class='pfolder-pin'></i></span>"+(isStickyClass?wcp_settings.lang.REMOVE_STICKY_FOLDER:wcp_settings.lang.STICKY_FOLDER)+"</a></li>":"<li class='sticky-folder-pro'><a target='_blank' href='"+wcp_settings.register_url+"'><span class='sticky-pin'><i class='pfolder-pin'></i></span>"+wcp_settings.lang.ACTIVATE.STICKY_FOLDER+"</a></li>",menuHtml+=x||n?"<li class='mark-folder'><a href='javascript:;'><span class=''><i class='pfolder-star'></i></span>"+(isHigh?wcp_settings.lang.REMOVE_STAR:wcp_settings.lang.ADD_STAR)+"</a></li>":"<li class='mark-folder-pro'><a target='_blank' href='"+wcp_settings.register_url+"'><span class=''><i class='pfolder-star'></i></span>"+(isHigh?wcp_settings.lang.ACTIVATE.REMOVE_STAR:wcp_settings.lang.ACTIVATE.ADD_STAR)+"</a></li>",x?(menuHtml+="<li class='lock-folder'><a href='javascript:;'><span class='dashicons dashicons-"+(isLocked?"unlock":"lock")+"'></span>"+(isLocked?wcp_settings.lang.UNLOCK_FOLDER:wcp_settings.lang.LOCK_FOLDER)+"</a></li>",menuHtml+="<li class='duplicate-folder'><a href='javascript:;'><span class=''><i class='pfolder-clone'></i></span>"+wcp_settings.lang.DUPLICATE_FOLDER+"</a></li>"):(menuHtml+="<li class='lock-folder-pro'><a target='_blank' href='"+wcp_settings.register_url+"'><span class='dashicons dashicons-lock'></span>"+wcp_settings.lang.ACTIVATE.LOCK_FOLDER+"</a></li>",menuHtml+="<li class='duplicate-folder-pro'><a target='_blank' href='"+wcp_settings.register_url+"'><span class=''><i class='pfolder-clone'></i></span>"+wcp_settings.lang.ACTIVATE.DUPLICATE_FOLDER+"</a></li>"),hasPosts=parseInt(e(this).closest("a.jstree-anchor").find(".premio-folder-count").text()),"attachment"==wcp_settings.post_type&&hasPosts&&(menuHtml+=x?"<li class='download-folder'><a href='javascript:;'><span class=''><i class='pfolder-zip-file'></i></span>"+wcp_settings.lang.DOWNLOAD_ZIP+"</a></li>":"<li class='download-folder-pro'><a target='_blank' href='"+wcp_settings.register_url+"'><span class=''><i class='pfolder-zip-file'></i></span>"+wcp_settings.lang.ACTIVATE.DOWNLOAD_ZIP+"</a></li>"),isDefault?menuHtml+="<li class='remove-default-folder'><a href='javascript:;'><span><i class='pfolder-active-icon'></i></span>"+wcp_settings.lang.REMOVE_THIS_FOLDER+"</a></li>":menuHtml+="<li class='default-folders'><a href='javascript:;'><span><i class='pfolder-active-icon'></i></span>"+wcp_settings.lang.OPEN_THIS_FOLDER+"</a></li>",menuHtml+="<li class='cut-folders'><a href='javascript:;'><span><i class='pfolder-cut'></i></span>"+wcp_settings.lang.CUT+"</a></li>",menuHtml+="<li class='copy-folders'><a href='javascript:;'><span><i class='pfolder-copy'></i></span>"+wcp_settings.lang.COPY+"</a></li>",O&&(menuHtml+="<li class='paste-folders'><a href='javascript:;'><span><i class='pfolder-paste'></i></span>"+wcp_settings.lang.PASTE+"</a></li>"),menuHtml+="<li class='remove-folder'><a href='javascript:;'><span class=''><i class='pfolder-remove'></i></span>"+wcp_settings.lang.DELETE+"</a></li></ul></div>",e("body").append(menuHtml),e(".custom-scroll-menu").hasClass("hor-scroll")?(null!=S&&null!=E?(e(".dynamic-menu").css("left",S),e(".dynamic-menu").css("top",E-10),a=E):o.pageX!==t&&o.pageY!=t?(e(".dynamic-menu").css("left",o.pageX),e(".dynamic-menu").css("top",o.pageY),a=o.pageY):e(this).offset().top!==t&&e(this).offset().left!=t&&(e(".dynamic-menu").css("left",e(this).offset().left),e(".dynamic-menu").css("top",e(this).offset().top),a=e(this).offset().top),S=null,E=null):o.pageX!==t&&o.pageY!=t?(e(".dynamic-menu").css("left",o.pageX),e(".dynamic-menu").css("top",o.pageY),a=o.pageY):e(this).offset().top!==t&&e(this).offset().left!=t?(e(".dynamic-menu").css("left",e(this).offset().left),e(".dynamic-menu").css("top",e(this).offset().top),a=e(this).offset().top):(e(".dynamic-menu").css("left",S),e(".dynamic-menu").css("top",E-10),a=E),e(this).parents("li.jstree-node").addClass("active-menu"),a+e(".dynamic-menu").height()>e(window).height()&&e(".dynamic-menu").css("margin-top",e(window).height()-(a+e(".dynamic-menu").height())),e(".custom-folder-icon-color").length){var l=K(i);V=""==y[l].has_color?wcp_settings.default_folder:y[l].has_color,e(".custom-folder-icon-color").spectrum({chooseText:"Submit",preferredFormat:"hex",showInput:!0,appendTo:e(".color-selector-ul"),cancelText:"Cancel",color:V,show:function(e){F=!1},hide:function(t){if(folderID=e(this).closest(".dynamic-menu").data("id"),!F&&V){var o=K(folderID);y[o].has_color=V,ie()}else{var a=t.toHexString();void 0===a&&(a="");o=K(folderID);y[o].has_color=a,ie(),s=Y(folderID,"nonce"),I=e.ajax({url:wcp_settings.ajax_url,data:{term_id:folderID,type:wcp_settings.post_type,action:"wcp_change_color_folder",nonce:s,color:a},beforeSend:function(){null!==I&&I.abort()},method:"post",cache:!1,success:function(t){t=e.parseJSON(t),ie()}})}e(".dynamic-menu").remove()},change:function(t){F=!0;var o=t.toHexString();void 0===o&&(o="");var a=K(folderID);y[a].has_color=o,ie(),s=Y(folderID,"nonce"),I=e.ajax({url:wcp_settings.ajax_url,data:{term_id:folderID,type:wcp_settings.post_type,action:"wcp_change_color_folder",nonce:s,color:o},beforeSend:function(){null!==I&&I.abort()},method:"post",cache:!1,success:function(t){t=e.parseJSON(t),ie()}})},move:function(t){folderID=e(this).closest(".dynamic-menu").data("id");var s=t.toHexString();void 0===s&&(s="");var o=K(folderID);y[o].has_color=s,ie()}})}return!1}}))),e(document).on("click",".sticky-folders .sticky-fldr > a",(function(t){t.stopPropagation();var s=e(this).closest("li").data("folder-id");e(".jstree-node[id='"+s+"']").length&&(e(".jstree-clicked").removeClass("jstree-clicked"),e(".active-item").removeClass("active-item"),e("#js-tree-menu").jstree("select_node",m),e(".jstree-node[id='"+s+"'] > a.jstree-anchor").trigger("click"),e(".jstree-node[id='"+s+"'] > a.jstree-anchor").addClass("jstree-clicked"),e(".sticky-folders .sticky-folder-"+s+" a").addClass("active-item"))})),e(document).on("click",".tree-structure a",(function(t){t.stopPropagation();var s=e(this).data("id");e(".jstree-node[id='"+s+"']").length&&(e(".jstree-clicked").removeClass("jstree-clicked"),e(".active-item").removeClass("active-item"),e("#js-tree-menu").jstree("select_node",m),e(".jstree-node[id='"+s+"'] > a.jstree-anchor").trigger("click"),e(".jstree-node[id='"+s+"'] > a.jstree-anchor").addClass("jstree-clicked"),e(".sticky-folders .sticky-folder-"+s+" a").addClass("active-item"))})),"admin"!=U&&"view-edit"!=U||(e(document).on("contextmenu",".sticky-fldr >  a",(function(t){return t.stopPropagation(),S=t.pageX,E=t.pageY,e(this).find("span.update-inline-record").trigger("click"),!1})),e(document).on("click",".update-inline-record",(function(s){var o;(s.stopImmediatePropagation(),s.stopPropagation(),0!=wcp_settings.can_manage_folder)&&(isHigh=e(this).closest("li.sticky-fldr").hasClass("is-high"),isLocked=e(this).closest("li.sticky-fldr").hasClass("is-locked"),isSticky=e(this).closest("li.sticky-fldr").hasClass("is-sticky"),e(this).closest("div.sticky-folders").length&&(isSticky=!0),isStickyClass=!!isSticky,e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu"),menuHtml="<div class='dynamic-menu "+(isLocked?"is-locked":"")+" "+(x?"no-key":"")+" ' data-id='"+e(this).closest("li").data("folder-id")+"'><ul>","admin"==U&&(menuHtml+=x||r?"<li class='new-folder'><a href='javascript:;'><span class=''><i class='pfolder-add-folder'></i></span>"+wcp_settings.lang.NEW_SUB_FOLDER+"</a></li>":"<li class='new-folder-pro'><a target='_blank' href='javascript:;'><span class=''><i class='pfolder-add-folder'></i></span>"+wcp_settings.lang.ACTIVATE.NEW_SUB_FOLDER+"</a></li>"),menuHtml+="<li class='rename-folder'><a href='javascript:;'><span class=''><i class='pfolder-edit'></i></span>"+wcp_settings.lang.RENAME+"</a></li>",menuHtml+=x?"<li class='sticky-folder'><a href='javascript:;'><span class='sticky-pin'><i class='pfolder-pin'></i></span>"+(isStickyClass?wcp_settings.lang.REMOVE_STICKY_FOLDER:wcp_settings.lang.STICKY_FOLDER)+"</a></li>":"<li class='sticky-folder-pro'><a target='_blank' href='"+wcp_settings.register_url+"'><span class='sticky-pin'><i class='pfolder-pin'></i></span>"+wcp_settings.lang.ACTIVATE.STICKY_FOLDER+"</a></li>",menuHtml+=x||n?"<li class='mark-folder'><a href='javascript:;'><span class=''><i class='pfolder-star'></i></span>"+(isHigh?wcp_settings.lang.REMOVE_STAR:wcp_settings.lang.ADD_STAR)+"</a></li>":"<li class='mark-folder-pro'><a target='_blank' href='"+wcp_settings.register_url+"'><span class=''><i class='pfolder-star'></i></span>"+(isHigh?wcp_settings.lang.ACTIVATE.REMOVE_STAR:wcp_settings.lang.ACTIVATE.ADD_STAR)+"</a></li>",x?(menuHtml+="<li class='lock-folder'><a href='javascript:;'><span class='dashicons dashicons-"+(isLocked?"unlock":"lock")+"'></span>"+(isLocked?wcp_settings.lang.UNLOCK_FOLDER:wcp_settings.lang.LOCK_FOLDER)+"</a></li>",menuHtml+="<li class='duplicate-folder'><a href='javascript:;'><span class=''><i class='pfolder-clone'></i></span>"+wcp_settings.lang.DUPLICATE_FOLDER+"</a></li>"):(menuHtml+="<li class='lock-folder-pro'><a target='_blank' href='"+wcp_settings.register_url+"'><span class='dashicons dashicons-lock'></span>"+wcp_settings.lang.ACTIVATE.LOCK_FOLDER+"</a></li>",menuHtml+="<li class='duplicate-folder-pro'><a target='_blank' href='"+wcp_settings.register_url+"'><span class=''><i class='pfolder-clone'></i></span>"+wcp_settings.lang.ACTIVATE.DUPLICATE_FOLDER+"</a></li>"),hasPosts=parseInt(e(this).closest("a.jstree-anchor").find(".premio-folder-count").text()),"attachment"==wcp_settings.post_type&&hasPosts&&(menuHtml+=x?"<li target='_blank' class='download-folder'><a href='javascript:;'><span class=''><i class='pfolder-zip-file'></i></span>"+wcp_settings.lang.DOWNLOAD_ZIP+"</a></li>":"<li target='_blank' class='download-folder-pro'><a target='_blank' href='"+wcp_settings.register_url+"'><span class=''><i class='pfolder-zip-file'></i></span>"+wcp_settings.lang.ACTIVATE.DOWNLOAD_ZIP+"</a></li>"),menuHtml+="<li class='remove-folder'><a href='javascript:;'><span class=''><i class='pfolder-remove'></i></span>"+wcp_settings.lang.DELETE+"</a></li></ul></div>",e("body").append(menuHtml),s.pageX!==t&&s.pageY!=t?(e(".dynamic-menu").css("left",s.pageX),e(".dynamic-menu").css("top",s.pageY),o=s.pageY):e(this).offset().top!==t&&e(this).offset().left!=t?(e(".dynamic-menu").css("left",e(this).offset().left),e(".dynamic-menu").css("top",e(this).offset().top),o=e(this).offset().top):(e(".dynamic-menu").css("left",S),e(".dynamic-menu").css("top",E-10),o=E),o+e(".dynamic-menu").height()>e(window).height()&&e(".dynamic-menu").css("margin-top",e(window).height()-(o+e(".dynamic-menu").height())))}))),e(document).on("click",".dynamic-menu",(function(e){e.stopImmediatePropagation(),e.stopPropagation()})),e(document).on("click",".new-folder-pro",(function(t){t.preventDefault(),e(".dynamic-menu").remove(),e("#sub-folder-popup").show()})),e(document).on("click",".close-popup-button a",(function(){e(".folder-popup-form").hide(),e(".jstree-node[id='"+g+"']").length&&e(".jstree-node[id='"+g+"'] > a.jstree-anchor").trigger("focus")})),e(document).on("click","body, html",(function(){e(".dynamic-menu").remove()})),e(".wcp-hide-show-buttons .toggle-buttons").click((function(){var t="show";e(this).hasClass("hide-folders")&&(t="hide"),e(".wcp-hide-show-buttons .toggle-buttons").toggleClass("active"),s=wcp_settings.nonce,"show"==t?(e("#wcp-content").addClass("no-transition"),e("#wcp-content").removeClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right",parseInt(wcp_settings.folder_width)+20+"px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left",parseInt(wcp_settings.folder_width)+20+"px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px - "+parseInt(wcp_settings.folder_width)+"px)"),setTimeout((function(){e("#wcp-content").removeClass("no-transition")}),250)):(e("#wcp-content").addClass("hide-folders-area"),"1"==wcp_settings.isRTL?(e("#wpcontent").css("padding-right","20px"),e("#wpcontent").css("padding-left","0px")):e("#wpcontent").css("padding-left","20px"),e("body.wp-admin #e-admin-top-bar-root.e-admin-top-bar--active").css("width","calc(100% - 160px)")),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_change_folder_display_status&status="+t+"&nonce="+s,method:"post",success:function(e){}})})),J(),e(document).ajaxComplete((function(s,o,a){a.data!=t&&""!=a.data&&"string"==e.type(a.data)&&-1!=a.data.indexOf("action=query-attachments")&&J()})),e(document).on("click",".undo-button, .undo-folder-action:not(.disabled)",(function(){e(".folders-undo-notification").removeClass("active"),e(this).hasClass("copy-paste-action")?0!=d&&(0!=N||0!=d?(0==L&&(L=""),e("#js-tree-menu").jstree("move_node","#"+d,"#"+l,c),0,L=0,d=0,c=0):0!=N&&(s=Y(g=N,"nonce"),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_remove_folder&term_id="+g+"&nonce="+s,method:"post",success:function(s){if("1"==(s=e.parseJSON(s)).status){if(e("#js-tree-menu").jstree().delete_node(g),o=parseInt(s.is_key_active),a=parseInt(s.folders),e("#current-folder").text(a),e("#ttl-fldr").text(10),e(".sticky-folders .sticky-folder-"+g).remove(),e("#media-attachment-taxonomy-filter").length){var n=parent.wp;n.media!=t&&(n.media.frame.setState("insert"),null!==n.media.frame.content.get()&&void 0!==n.media.frame.content.get().collection?(n.media.frame.content.get().collection.props.set({ignore:+new Date}),n.media.frame.content.get().options.selection.reset()):n.media.frame.library.props.set({ignore:+new Date}))}se(),ue(),e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),W(),me(),m==g&&e(".header-posts").trigger("click")}else e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(s.message),e("#error-folder-popup").show()}}))):"yes"==wcp_settings.useFolderUndo&&e.ajax({url:wcp_settings.ajax_url,type:"post",data:{post_type:wcp_settings.post_type,nonce:wcp_settings.nonce,action:"wcp_undo_folder_changes"},success:function(s){if(e("#undo-done").addClass("active"),e(".undo-folder-action").addClass("disabled"),setTimeout((function(){e("#undo-done").removeClass("active")}),2500),W(),e("#media-attachment-taxonomy-filter").length){var o=parent.wp;o.media!=t&&(o.media.frame.setState("insert"),null!==o.media.frame.content.get()&&void 0!==o.media.frame.content.get().collection?(o.media.frame.content.get().collection.props.set({ignore:+new Date}),o.media.frame.content.get().options.selection.reset()):o.media.frame.library.props.set({ignore:+new Date}))}}})})),e(document).on("click",".close-undo-box",(function(t){t.preventDefault(),e("#do-undo").removeClass("active")}))})),e(window).on("resize",(function(){Z()})),e(window).scroll((function(){})),e(document).ready((function(){e(document).on("click",".download-folder",(function(){folderID=e(this).closest(".dynamic-menu").data("id"),e(".folder-download-loading").show(),e(".dynamic-menu").hide();var t=parseInt(e("#"+folderID+"_anchor .premio-folder-count").text());e.ajax({data:{folder_id:folderID,nonce:Y(folderID,"nonce"),action:"download_folders_data",total_files:t},method:"post",url:wcp_settings.ajax_url,success:function(t){(t=e.parseJSON(t)).status?parseInt(t.files)>parseInt(t.scanned)?(e(".folder-download-loading").show(),ee(t.folder_id,t.nonce,parseInt(t.files),parseInt(t.page)+1)):(e(".folder-download-loading").hide(),te(t.file_url,t.file_name)):alert(t.message)},error:function(){e(".folder-download-loading").hide(),alert("Something went wrong, not able to create zip file")}})}))})),e(document).ready((function(){e(document).on("click","#add-new-folder",(function(){g=e("#js-tree-menu a.jstree-clicked").length?e("#js-tree-menu a.jstree-clicked").closest("li.jstree-node").attr("id"):0,h=!1,e("#add-update-folder-title").text(wcp_settings.lang.ADD_NEW_FOLDER),f=!1,oe()})),e(document).on("change","#media-attachment-taxonomy-filter",(function(t){C||(e("#js-tree-menu").hasClass("jstree-default")&&e("#js-tree-menu").jstree(!0).deselect_all(),e("#dynamic-folders").length&&e("#dynamic-folders").hasClass("jstree-default")&&e("#dynamic-folders").jstree(!0).deselect_all(),e(".active-item").removeClass("active-item"),"all"==e(this).val()?e(".all-posts").addClass("active-item"):"unassigned"==e(this).val()?e(".un-categorised-items").addClass("active-item"):(e("#js-tree-menu").jstree("select_node",e(this).val()),e(".sticky-folder-"+e(this).val()+" a").addClass("active-item")))})),e(document).on("click",".new-folder",(function(){g=e(this).closest(".dynamic-menu").data("id"),f=!1,h=!1,e("#add-update-folder-title").text(wcp_settings.lang.ADD_NEW_FOLDER),oe()})),e(document).on("click",".duplicate-folder",(function(t){t.stopPropagation(),g=e(this).closest(".dynamic-menu").data("id"),e(".dynamic-menu").remove(),f=!1,h=!0,e("#add-update-folder-title").text(wcp_settings.lang.DUPLICATING_FOLDER),oe(),se()})),e(document).on("submit","#save-folder-form",(function(t){if(t.stopPropagation(),t.preventDefault(),folderNameDynamic=e.trim(e("#add-update-folder-name").val()),""==e.trim(folderNameDynamic))e(".folder-form-errors").addClass("active"),e("#add-update-folder-name").focus();else{e("#save-folder-data").html('<span class="dashicons dashicons-update"></span>'),e("#add-update-folder").addClass("disabled");var s=g;f&&(s=0),r||(s=0),v=0==s?e("#js-tree-menu > ul > li.jstree-node").length:e("#js-tree-menu > ul > li.jstree-node[id='"+s+"'] > ul.jstree-children > li").length+1;var n=[];0==s?e("#js-tree-menu > .jstree-container-ul > .jstree-node").length&&e("#js-tree-menu > .jstree-container-ul > .jstree-node").each((function(){n.push(e(this).attr("id"))})):e("#js-tree-menu .jstree-node[id='"+s+"'] > ul> li.jstree-node").length&&e("#js-tree-menu .jstree-node[id='"+s+"'] > ul> li.jstree-node").each((function(){n.push(e(this).attr("id"))})),e.ajax({url:wcp_settings.ajax_url,data:{parent_id:s,type:wcp_settings.post_type,action:"wcp_add_new_folder",nonce:wcp_settings.nonce,term_id:s,order:v,name:folderNameDynamic,folders:n,is_duplicate:h,duplicate_from:_},method:"post",success:function(t){if(result=e.parseJSON(t),e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),-1==result.status)e("#no-more-folder-credit").show();else if("1"==result.status){if(o=parseInt(result.is_key_active),a=parseInt(result.folders),e("#current-folder").text(a),e("#ttl-fldr").text(10),de(),se(),result.data.length)for(var s=0;s<result.data.length;s++){var n={folder_id:result.data[s].term_id,folder_count:result.data[s].folder_count,is_sticky:result.data[s].is_sticky,is_high:result.data[s].is_high,is_locked:result.data[s].is_locked,has_color:result.data[s].has_color,nonce:result.data[s].nonce,slug:result.data[s].slug,is_deleted:0};y.push(n);var i=result.data[s].title;i=i.replace(/\\/g,""),e("#js-tree-menu").jstree().create_node(result.parent_id,{id:result.data[s].term_id,text:" "+i},s,(function(){e(".jstree-node[id='"+result.data[s].term_id+"']").attr("data-nonce",result.data[s].nonce),e(".jstree-node[id='"+result.data[s].term_id+"']").attr("data-slug",result.data[s].slug),e(".jstree-node[id='"+result.data[s].term_id+"']").attr("data-parent",result.parent_id),e(".jstree-node[id='"+result.data[s].term_id+"'] > a.jstree-anchor .premio-folder-count").text(result.data[s].folder_count)})),e(".jstree-node[id='"+result.parent_id+"']").length&&e("#js-tree-menu").jstree("open_node",e("#"+result.parent_id)),e(".jstree-node[id='"+result.parent_id+"']").length?e(".jstree-node[id='"+result.parent_id+"'] > a.jstree-anchor").trigger("focus"):e(".jstree-node[id='"+result.data[s].term_id+"']").length&&e(".jstree-node[id='"+result.data[s].term_id+"'] > a.jstree-anchor").trigger("focus")}ue(),B(),e("#dynamic-folders .jstree-clicked").length&&e("#js-tree-menu .jstree-clicked").removeClass("jstree-clicked"),e("#media-attachment-taxonomy-filter").length&&(g=result.term_id,ye(0),resetSelectMediaDropDown()),h&&W(),h=!1,_=0}else e("#error-folder-popup-message").html(result.message),e("#error-folder-popup").show()}})}return!1}))})),e(document).ready((function(){e("#inline-update").click((function(){e("#js-tree-menu a.jstree-clicked").length&&(g=e("#js-tree-menu a.jstree-clicked").closest("li.jstree-node").attr("id"),ae())})),e(document).on("click",".rename-folder",(function(t){t.stopPropagation(),g=e(this).closest(".dynamic-menu").data("id"),ae(),e(".dynamic-menu").remove()})),e(document).on("click",".form-cancel-btn",(function(){e(".folder-popup-form").hide(),e(".jstree-node[id='"+g+"']").length?e(".jstree-node[id='"+g+"'] > a.jstree-anchor").trigger("focus"):e("#js-tree-menu .jstree-anchor.jstree-clicked").length&&e("#js-tree-menu .jstree-anchor.jstree-clicked").trigger("focus")})),e(document).on("click",".folder-popup-form",(function(t){e(".folder-popup-form").hide(),e(".jstree-node[id='"+g+"']").length?e(".jstree-node[id='"+g+"'] > a.jstree-anchor").trigger("focus"):e("#js-tree-menu .jstree-anchor.jstree-clicked").length&&e("#js-tree-menu .jstree-anchor.jstree-clicked").trigger("focus")})),e(document).on("click",".popup-form-content",(function(e){e.stopPropagation()})),e(document).on("submit","#update-folder-form",(function(o){return o.stopPropagation(),o.preventDefault(),folderNameDynamic=e("#update-folder-item-name").val(),""==e.trim(folderNameDynamic)?(e(".folder-form-errors").addClass("active"),e("#update-folder-item-name").focus()):(e("#update-folder-data").html('<span class="dashicons dashicons-update"></span>'),e("#update-folder-item").addClass("disabled"),s=Y(g,"nonce"),parentID=e(".jstree-node[id='"+g+"']").closest("li.jstree-node").attr("id"),parentID==t&&(parentID=0),e.ajax({url:wcp_settings.ajax_url,data:{parent_id:parentID,type:wcp_settings.post_type,action:"wcp_update_folder",nonce:s,term_id:g,order:v,name:folderNameDynamic},method:"post",success:function(t){if(result=e.parseJSON(t),"1"==result.status){var s=result.term_title;s=s.replace(/\\/g,""),e("#js-tree-menu").jstree("rename_node",result.id," "+s),e(".sticky-folder-"+result.id+" .folder-title").html(s),folderPostId=K(result.id),null!=folderPostId&&(y[folderPostId].nonce=result.nonce,y[folderPostId].slug=result.slug),se(),e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),ue(),e("#media-attachment-taxonomy-filter").length&&ye(0)}else e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(result.message),e("#error-folder-popup").show();e("#dynamic-folders .jstree-clicked").length&&e("#js-tree-menu .jstree-clicked").removeClass("jstree-clicked")}})),!1}))})),e(document).ready((function(){e(document).on("click","#inline-remove, .delete-folder-action:not(.disabled)",(function(){e("#menu-checkbox").is(":checked")?(e(".dynamic-menu").remove(),ne(1)):e("#js-tree-menu a.jstree-clicked").length&&(e("#js-tree-menu a.jstree-clicked").closest(".jstree-node").hasClass("is-locked")||(g=e("#js-tree-menu a.jstree-clicked").closest("li.jstree-node").attr("id"),ne(1),e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu")))})),e(document).on("click","#js-tree-menu input.checkbox",(function(){we()})),e(document).on("click","#menu-checkbox",(function(){e(this).is(":checked")?(e(".js-tree-data").addClass("show-folder-checkbox"),e("#menu-checkbox").prop("checked",!0)):(e(".js-tree-data input.checkbox").attr("checked",!1),e(".js-tree-data").removeClass("show-folder-checkbox"),e("#menu-checkbox").prop("checked",!1))})),e(document).on("click","#menu-checkbox",(function(){e(this).is(":checked")?(e("#menu-checkbox").prop("checked",!0),e(".js-tree-data").addClass("show-folder-checkbox")):(e("#menu-checkbox").prop("checked",!1),e(".js-tree-data input.checkbox").attr("checked",!1),e(".js-tree-data").removeClass("show-folder-checkbox"))})),e(document).on("click",".folder-checkbox, .input-checkbox",(function(e){e.stopImmediatePropagation(),e.stopPropagation()})),e(document).on("click",".remove-folder",(function(){folderID=e(this).closest("li.jstree-node").data("id"),e(this).closest(".dynamic-menu").hasClass("is-locked")||(g=e(this).closest(".dynamic-menu").data("id"),ne(0),e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu"))})),e(document).on("click","#remove-folder-item",(function(t){t.stopPropagation(),e(".folder-popup-form").addClass("disabled"),e("#remove-folder-item").html('<span class="dashicons dashicons-update"></span>'),s=Y(g,"nonce"),w?function(){if(e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0){var t="";if(e("#js-tree-menu input.checkbox:checked").each((function(){e(this).closest("li.jstree-node").hasClass("is-locked")||(t+=e(this).closest("li.jstree-node").attr("id")+",",e(this).closest("li.jstree-node").hasClass("jstree-clicked")&&!0)})),""==t)return;e(".form-loader-count").css("width","100%"),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_remove_muliple_folder&term_id="+t+"&nonce="+wcp_settings.nonce,method:"post",success:function(t){if(t=e.parseJSON(t),e(".form-loader-count").css("width","0px"),"1"==t.status){for(o=parseInt(t.is_key_active),a=parseInt(t.folders),e("#current-folder").text(a),i=0;i<t.term_ids.length;i++)e("#js-tree-menu").jstree().delete_node(t.term_ids[i]);e("#ttl-fldr").text(10),ue(),e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),W(),me(),ue(),e("#js-tree-menu li.jstree-node").removeClass("has-sub-tree"),e("#js-tree-menu li.jstree-node").each((function(){e(this).find("ul.ui-sortable li").length?e(this).addClass("has-sub-tree"):e(this).removeClass("active")})),e("#wcp_folder_"+m).length||(e(".header-posts a").trigger("click"),m=0)}else window.location.reload();e("#menu-checkbox").attr("checked",!1),e("#js-tree-menu input.checkbox").attr("checked",!1),e("#js-tree-menu").removeClass("show-folder-checkbox")}})}}():e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_remove_folder&term_id="+g+"&nonce="+s,method:"post",success:function(t){if("1"==(t=e.parseJSON(t)).status){var s=function(t){if(e(".jstree-node[id='"+t+"']").next().length)return e(".jstree-node[id='"+t+"']").next().attr("id");if(e(".jstree-node[id='"+t+"']").prev().length)return e(".jstree-node[id='"+t+"']").prev().attr("id");if(e(".jstree-node[id='"+t+"']").parent().parent().hasClass("jstree-node"))return e(".jstree-node[id='"+t+"']").parent().parent().attr("id");return 0}(g);e("#js-tree-menu").jstree().delete_node(g),o=parseInt(t.is_key_active),a=parseInt(t.folders),e("#current-folder").text(a),e("#ttl-fldr").text(10),e(".sticky-folders .sticky-folder-"+g).remove(),se(),ue(),e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),W(),me(),0!=s&&e("#"+s+"_anchor").length?e("#"+s+"_anchor").trigger("click"):e(".header-posts").trigger("click")}else e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show()}})}))})),e(document).ready((function(){e(document).on("click",".mark-folder",(function(t){t.stopPropagation(),folderID=e(this).closest(".dynamic-menu").data("id"),s=Y(folderID,"nonce"),e(".form-loader-count").css("width","100%"),e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu"),e.ajax({url:wcp_settings.ajax_url,data:"term_id="+folderID+"&type="+wcp_settings.post_type+"&action=wcp_mark_un_mark_folder&nonce="+s,method:"post",cache:!1,success:function(t){t=e.parseJSON(t),e(".form-loader-count").css("width","0%"),"1"==t.status?(folderPostId=K(t.id),"1"==t.marked?(e("li.jstree-node[id='"+t.id+"']").addClass("is-high"),e(".sticky-folder-"+t.id).addClass("is-high"),null!=folderPostId&&(y[folderPostId].is_high=1)):(e("li.jstree-node[id='"+t.id+"']").removeClass("is-high"),e(".sticky-folder-"+t.id).removeClass("is-high"),null!=folderPostId&&(y[folderPostId].is_high=0)),se(),ue(),e(".jstree-node[id='"+t.id+"']").length&&e(".jstree-node[id='"+t.id+"'] > a.jstree-anchor").trigger("focus")):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})})),e(document).on("click",".lock-folder",(function(t){t.stopPropagation(),folderID=e(this).closest(".dynamic-menu").data("id"),s=Y(folderID,"nonce"),e(".form-loader-count").css("width","100%"),e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu"),e.ajax({url:wcp_settings.ajax_url,data:"term_id="+folderID+"&type="+wcp_settings.post_type+"&action=wcp_lock_unlock_folder&nonce="+s,method:"post",cache:!1,success:function(t){t=e.parseJSON(t),e(".form-loader-count").css("width","0%"),"1"==t.status?(folderPostId=K(t.id),"1"==t.marked?(e("li.jstree-node[id='"+t.id+"']").addClass("is-locked"),e(".sticky-folder-"+t.id).addClass("is-locked"),null!=folderPostId&&(y[folderPostId].is_locked=1)):(e("li.jstree-node[id='"+t.id+"']").removeClass("is-locked"),e(".sticky-folder-"+t.id).removeClass("is-locked"),null!=folderPostId&&(y[folderPostId].is_locked=0)),se(),ue(),e(".jstree-node[id='"+t.id+"']").length&&e(".jstree-node[id='"+t.id+"'] > a.jstree-anchor").trigger("focus")):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})})),e(document).on("click",".folder-color-option , .folder-color-default",(function(t){t.stopPropagation(),e(".dynamic-menu").remove(),e(".custom-folder-icon-color").spectrum("hide"),folderID=e(this).closest(".dynamic-menu").data("id");var o=e(this).attr("data-color");void 0===o&&(o="");var a=K(folderID);y[a].has_color=o,ie(),s=Y(folderID,"nonce"),e.ajax({url:wcp_settings.ajax_url,data:"term_id="+folderID+"&type="+wcp_settings.post_type+"&action=wcp_change_color_folder&nonce="+s+"&color="+o,method:"post",cache:!1,success:function(t){t=e.parseJSON(t),ie()}})})),e(document).on("click",".sticky-folder",(function(t){t.stopPropagation(),folderID=e(this).closest(".dynamic-menu").data("id");var o=0;folderPostId=K(folderID),e("li.jstree-node[id='"+folderID+"']").hasClass("is-sticky")?(e("li.jstree-node[id='"+folderID+"']").removeClass("is-sticky"),e(".sticky-folders .sticky-folder-"+g).remove(),null!=folderPostId&&(y[folderPostId].is_sticky=0)):(o=1,e("li.jstree-node[id='"+folderID+"']").addClass("is-sticky"),null!=folderPostId&&(y[folderPostId].is_sticky=1)),e(".dynamic-menu").hide(),s=Y(folderID,"nonce"),me(),e.ajax({url:wcp_settings.ajax_url,data:"term_id="+folderID+"&type="+wcp_settings.post_type+"&action=wcp_make_sticky_folder&nonce="+s+"&status="+o,method:"post",cache:!1,success:function(t){"1"==(t=e.parseJSON(t)).status&&e(".jstree-node[id='"+t.id+"']").length&&e(".jstree-node[id='"+t.id+"'] > a.jstree-anchor").trigger("focus")}})}))})),e(document).ready((function(){e(document).on("click",".js-tree-data .jstree-node .jstree-icon",(function(){folderID=e(this).closest("li.jstree-node").attr("id"),e("li.jstree-node[id='"+folderID+"']").hasClass("jstree-open")?folderStatus=1:folderStatus=0,e(".form-loader-count").css("width","100%"),s=Y(folderID,"nonce"),de(),e.ajax({url:wcp_settings.ajax_url,data:"is_active="+folderStatus+"&action=save_wcp_folder_state&term_id="+folderID+"&nonce="+s,method:"post",success:function(t){e(".form-loader-count").css("width","0"),"0"==(t=e.parseJSON(t)).status||(e("#wcp_folder_"+folderID).hasClass("active")?(e("#wcp_folder_"+folderID).removeClass("active"),e("#wcp_folder_"+folderID).find("ul.ui-sortable:first-child > li").slideUp(),folderStatus=0):(e("#wcp_folder_"+folderID).addClass("active"),e("#wcp_folder_"+folderID).find("ul.ui-sortable:first-child > li").slideDown(),folderStatus=1),ue()),e("span.premio-folder-count").each((function(){""==e(this).text()&&e(this).text(0)}))}}),B()})),e(document).on("click",".dynamic-tree-data .jstree-node .jstree-icon",(function(){folderID=e(this).closest("li.jstree-node").attr("id"),e("li.jstree-node[id='"+folderID+"']").hasClass("jstree-open")?folderStatus=1:folderStatus=0,e(".form-loader-count").css("width","100%"),s=Y(folderID,"nonce"),de(),e.ajax({url:wcp_settings.ajax_url,data:{is_active:folderStatus,action:"save_wcp_dynamic_folder_state",term_id:folderID,nonce:wcp_settings.nonce,post_type:wcp_settings.post_type},method:"post",success:function(t){e(".form-loader-count").css("width","0"),"0"==(t=e.parseJSON(t)).status||(e("#wcp_folder_"+folderID).hasClass("active")?(e("#wcp_folder_"+folderID).removeClass("active"),e("#wcp_folder_"+folderID).find("ul.ui-sortable:first-child > li").slideUp()):(e("#wcp_folder_"+folderID).addClass("active"),e("#wcp_folder_"+folderID).find("ul.ui-sortable:first-child > li").slideDown()),ue())}}),B()}))})),e(window).on("load",(function(){""!=wcp_settings.default_folder&&e("#posts-filter").length&&(e("#default_folder").length||e("#posts-filter .search-box").append("<input type='hidden' id='default_folder' name='"+wcp_settings.custom_type+"' />"),e("#default_folder").val(wcp_settings.default_folder))})),e(document).ready((function(){e(document).on("click","#js-tree-menu a.jstree-anchor",(function(t){if(T=1,t.stopPropagation(),e(".un-categorised-items").removeClass("active-item"),e(".header-posts a").removeClass("active-item"),e("active-item").removeClass("active-item"),e("#dynamic-tree-folders .jstree-clicked").removeClass("jstree-clicked"),m=e(this).closest("li.jstree-node").attr("id"),g=e(this).closest("li.jstree-node").attr("id"),e(".sticky-folders .sticky-folder-"+m+" a").addClass("active-item"),e("#js-tree-menu .jstree-clicked").removeClass("jstree-clicked"),e(this).addClass("jstree-clicked"),e("#media-attachment-taxonomy-filter").length){C=0;var s=e(this).closest("li.jstree-node").attr("id");e("#media-attachment-taxonomy-filter").val(s),e("#media-attachment-taxonomy-filter").trigger("change"),thisSlug=Y(s,"slug"),k=wcp_settings.page_url+thisSlug+"&paged="+T;var o={Title:thisSlug,Url:k};history.pushState(o,o.Title,o.Url),ce(thisSlug),e(".custom-media-select").removeClass("active")}else{var a=Y(m,"slug");k=wcp_settings.page_url+a+"&paged="+T,e(".form-loader-count").css("width","100%"),e("#folder-posts-filter").length?e("#folder-posts-filter").load(k+" #posts-filter",(function(){var t={Title:a,Url:k};history.pushState(t,t.Title,t.Url),ce(a),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),X(),""!=wcp_settings.default_folder&&""!=a&&(e("#default_folder").length||e("#posts-filter .search-box").append("<input type='hidden' id='default_folder' name='"+wcp_settings.custom_type+"' />"),e("#default_folder").val(a))})):e("#wpbody").load(k+" #wpbody-content",(function(){var t={Title:a,Url:k};history.pushState(t,t.Title,t.Url),ce(a),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),X(),""!=wcp_settings.default_folder&&""!=a&&(e("#default_folder").length||e("#posts-filter .search-box").append("<input type='hidden' id='default_folder' name='"+wcp_settings.custom_type+"' />"),e("#default_folder").val(a))}))}G(),e(".sticky-folders .sticky-folder-"+m+" a").addClass("active-item"),we()})),e(document).on("click","#dynamic-tree-folders a.jstree-anchor",(function(t){if(m="",t.stopPropagation(),e(".un-categorised-items").removeClass("active-item"),e(".header-posts a").removeClass("active-item"),e(".active-item").removeClass("active-item"),e("#js-tree-menu .jstree-clicked").removeClass("jstree-clicked"),T=1,e("#media-attachment-taxonomy-filter").length){k=wcp_settings.page_url+"&paged="+T+"&ajax_action=premio_dynamic_folders&dynamic_folder="+e(this).closest("li").prop("id"),C=1,e("#media-attachment-dynamic-filter").val(e(this).closest("li").prop("id")).trigger("change"),e("#media-attachment-taxonomy-filter").val("all");var s={Title:jQuery("title").text(),Url:k};history.pushState(s,s.Title,s.Url)}else{e("#media-attachment-dynamic-filter").val("dynamic-folders"),folderSlug=e(this).text();e(this).attr("id");if("category"==e(this).data("select")){var o=e(this).data("selected"),a=wcp_settings.page_url;k=(a=a+"&product_cat="+o)+"&paged="+T+"&ajax_action=premio_dynamic_folders&dynamic_folder="+e(this).attr("id")}else if("lesson-category"==e(this).data("select")){var n=e(this).data("selected"),i=wcp_settings.page_url;k=(i=i+"&ld_lesson_category="+n)+"&paged="+T+"&ajax_action=premio_dynamic_folders&dynamic_folder="+e(this).attr("id")}else if("course-category"==e(this).data("select")){var r=e(this).data("selected"),l=wcp_settings.page_url;k=(l=l+"&ld_course_category="+r)+"&paged="+T+"&ajax_action=premio_dynamic_folders&dynamic_folder="+e(this).attr("id")}else if("plugin"==e(this).data("selectedtype")){var c=wcp_settings.plugin_url;c=c+"?plugin_status="+e(this).data("select"),k=c+"&paged="+T+"&ajax_action=premio_dynamic_folders&dynamic_folder="+e(this).attr("id")}else k=wcp_settings.page_url+"&paged="+T+"&ajax_action=premio_dynamic_folders&dynamic_folder="+e(this).attr("id");e(".form-loader-count").css("width","100%"),e("#folder-posts-filter").length?e("#folder-posts-filter").load(k+" #posts-filter",(function(){var t={Title:folderSlug,Url:k};history.pushState(t,t.Title,t.Url),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),X()})):e("#wpbody").load(k+" #wpbody-content",(function(){var t={Title:folderSlug,Url:k};history.pushState(t,t.Title,t.Url),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),X()}))}we()})),e(".header-posts").click((function(){if(m="",C=0,e(".wcp-container .route").removeClass("active-item"),e(".un-categorised-items").removeClass("active-item"),e(".sticky-folders .active-item").removeClass("active-item"),e(".header-posts a").addClass("active-item"),e(".jstree-clicked").removeClass("jstree-clicked"),e("#media-attachment-taxonomy-filter").length){m="",jQuery("#media-attachment-dynamic-filter").val("dynamic-folders").trigger("change"),e("#media-attachment-taxonomy-filter").val("all"),e("#media-attachment-taxonomy-filter").trigger("change");var t={Title:"",Url:wcp_settings.page_url};history.pushState(t,t.Title,t.Url),ce("all"),G()}else T=1,k=wcp_settings.page_url+"&paged="+T,e(".form-loader-count").css("width","100%"),e("#folder-posts-filter").length?e("#folder-posts-filter").load(k+" #posts-filter",(function(){var t={Title:"",Url:k};history.pushState(t,t.Title,t.Url),ce("all"),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),G(),X()})):e("#wpbody").load(k+" #wpbody-content",(function(){var t={Title:"",Url:k};history.pushState(t,t.Title,t.Url),ce("all"),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),G(),X()}));we()})),e(".un-categorised-items").click((function(){if(m="-1",C=0,e(".wcp-container .route").removeClass("active-item"),e(".header-posts a").removeClass("active-item"),e(".un-categorised-items").addClass("active-item"),e(".sticky-folders .active-item").removeClass("active-item"),e(".jstree-clicked").removeClass("jstree-clicked"),e("#media-attachment-taxonomy-filter").length){e("#media-attachment-taxonomy-filter").val("unassigned"),e("#media-attachment-taxonomy-filter").trigger("change");var t={Title:"",Url:wcp_settings.page_url+"-1"};history.pushState(t,t.Title,t.Url),ce("-1"),G()}else jQuery("#media-attachment-dynamic-filter").val("dynamic-folders").trigger("change"),T=1,k=wcp_settings.page_url+"-1&paged="+T,e(".form-loader-count").css("width","100%"),e("#folder-posts-filter").length?e("#folder-posts-filter").load(k+" #posts-filter",(function(){var t={Title:"",Url:k};history.pushState(t,t.Title,t.Url),ce("-1"),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),G(),X()})):e("#wpbody").load(k+" #wpbody-content",(function(){var t={Title:"",Url:k};history.pushState(t,t.Title,t.Url),ce("-1"),"show"!=wcp_settings.show_in_page||e(".tree-structure").length||e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div></div>'),G(),X()}));we()})),e("#expand-collapse-list").click((function(t){t.stopPropagation(),statusType=0,e(this).hasClass("all-open")?(e(this).removeClass("all-open"),statusType=0,e(this).attr("data-folder-tooltip",wcp_settings.lang.EXPAND),e("#expand-collapse-list .text").text(wcp_settings.lang.EXPAND),e("#js-tree-menu").jstree("close_all")):(e(this).addClass("all-open"),statusType=1,e(this).attr("data-folder-tooltip",wcp_settings.lang.COLLAPSE),e("#expand-collapse-list .text").text(wcp_settings.lang.COLLAPSE),e("#js-tree-menu").jstree("open_all")),j="",e("#js-tree-menu .jstree-node:not(.jstree-leaf)").each((function(){j+=e(this).attr("id")+","})),""!=j&&(e(".form-loader-count").css("width","100%"),s=wcp_settings.nonce,e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_change_all_status&status="+statusType+"&folders="+j+"&nonce="+s,method:"post",success:function(t){e(".form-loader-count").css("width","0"),"0"==(t=e.parseJSON(t)).status&&(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show(),window.location.reload(!0))}}))})),de(),e("#dynamic-tree-folders").jstree({core:{cache:!1,animation:0,dnd:{is_draggable:function(e){return!1}}},data:{cache:!1},select_node:!1,search:{show_only_matches:!0,case_sensitive:!1,fuzzy:!1},plugins:["dnd","search"]}).bind("ready.jstree",(function(){e(".dynamic-tree-data").show(),""!=wcp_settings.dynamic_folder&&e("#dynamic-folders").length&&e(".dynamic-tree-data #"+wcp_settings.dynamic_folder).length&&(e("#dynamic-folders").jstree("select_node",wcp_settings.dynamic_folder),wcp_settings.dynamic_folder="")}))})),e(document).ready((function(){e(document).on("click","body, html",(function(){e(".folder-order").removeClass("active")})),e(document).on("click","#sort-order-list",(function(t){t.stopPropagation(),e(".folder-order").toggleClass("active")})),e(document).on("click",".folder-sort-menu a:not(.pro-feature)",(function(t){t.stopPropagation(),t.preventDefault(),e(".form-loader-count").css("width","100%"),e(".folder-order").removeClass("active"),lastOrderStatus=e(this).attr("data-sort"),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_folders_by_order&nonce="+wcp_settings.nonce+"&order="+e(this).attr("data-sort"),method:"post",success:function(t){1==(t=e.parseJSON(t)).status&&(e("#js-tree-menu").jstree().destroy(),e("#js-tree-menu").append("<ul></ul>"),e("#js-tree-menu ul").html(t.data),re(),b=t.terms,fe()),e(".form-loader-count").css("width","0"),G()}})}))})),e(document).ready((function(){e(document).on("keyup","#folder-search",(function(){le()})),e(document).on("change","#folder-search",(function(){le()})),e(document).on("blur","#folder-search",(function(){le()}))})),e(document).ready((function(){e(document).on("click",".folders-toggle-button",(function(){dbStatus="show",e(".tree-structure-content").hasClass("active")?(e(".tree-structure-content .tree-structure").animate({height:"40px"},100,(function(){e(".tree-structure-content").removeClass("active")})),dbStatus="hide"):(newHeight=parseInt(e(".tree-structure-content .tree-structure").attr("data-height")),e(".tree-structure-content .tree-structure").animate({height:newHeight},100,(function(){e(".tree-structure-content").addClass("active")}))),e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_hide_folders&status="+dbStatus+"&nonce="+wcp_settings.nonce,method:"post",success:function(e){}})}))})),e(document).ready((function(){e(document).on("click",".thumbnail-hover-box a",(function(t){return t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),window.open(e(this).prop("href"),"_blank"),wp.media.frame.close(),!1})),e(document).on("click","#doaction",(function(t){return"move_to_folder"==e("#bulk-action-selector-top").val()?(he(),!1):"edit"==e("#bulk-action-selector-top").val()&&"object"==typeof inlineEditPost?(inlineEditPost.setBulk(),!1):void 0})),e(document).on("click","#doaction2",(function(t){return"move_to_folder"==e("#bulk-action-selector-bottom").val()?(he(),!1):"edit"==e("#bulk-action-selector-bottom").val()&&"object"==typeof inlineEditPost?(inlineEditPost.setBulk(),!1):void 0})),e(document).on("submit","#bulk-folder-form",(function(t){t.stopPropagation(),t.preventDefault(),""!=e("#bulk-select").val()&&(chkStr="",e(".wp-list-table input:checked").each((function(){chkStr+=e(this).val()+","})),""!=e("#bulk-select").val()&&("-1"==e("#bulk-select").val()?e.ajax({url:wcp_settings.ajax_url,data:"post_id="+chkStr+"&type="+wcp_settings.post_type+"&action=wcp_remove_post_folder&folder_id="+e(this).val()+"&nonce="+wcp_settings.nonce+"&status="+wcp_settings.taxonomy_status+"&taxonomy="+m,method:"post",success:function(t){e("#bulk-move-folder").hide(),W(),ue()}}):(s=Y(e("#bulk-select").val(),"nonce"),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:chkStr,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:e("#bulk-select").val(),nonce:s,status:wcp_settings.taxonomy_status,taxonomy:m,post_status:wcp_settings.post_status},method:"post",success:function(t){t=e.parseJSON(t),e("#bulk-move-folder").hide(),"1"==t.status?(W(),ue()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}}))))}))})),e(document).ready((function(){e(document).on("click","#remove-from-all-folders:not(.disabled), #remove-from-current-folder:not(.disabled)",(function(){e("#remove-from-all-folders, #remove-from-current-folder").addClass("disabled");var t="all";e(this).hasClass("remove-from-current-folder")&&(t="current"),e("#confirm-your-change").hide(),e.ajax({url:wcp_settings.ajax_url,data:{post_id:e("#unassigned_folders").val(),action:"wcp_remove_post_folder",active_folder:m,type:wcp_settings.post_type,folder_id:-1,nonce:wcp_settings.nonce,status:wcp_settings.taxonomy_status,taxonomy:m,remove_from:t},method:"post",success:function(t){e("#remove-from-all-folders, #remove-from-current-folder").removeClass("disabled"),ue(),W(),Q()}})})),e(document).on("click",".default-folders a",(function(t){t.preventDefault();var s=e(this).closest(".dynamic-menu").data("id"),o=K(s);if(e(".dynamic-menu").hide(),null!=o){var a=y[o].slug;wcp_settings.default_folder=a,e.ajax({url:wcp_settings.ajax_url,type:"post",data:"action=save_premio_default_folder&post_type="+wcp_settings.post_type+"&post_slug="+a+"&nonce="+wcp_settings.nonce+"&folder_id="+s,cache:!1,async:!1,success:function(t){B(),"1"==(t=e.parseJSON(t)).status&&e(".jstree-node[id='"+t.folder_id+"']").length&&e(".jstree-node[id='"+t.folder_id+"'] > a.jstree-anchor").trigger("focus")}})}})),e(document).on("click",".remove-default-folder a",(function(t){t.preventDefault(),e(".dynamic-menu").hide();var s=e(this).closest(".dynamic-menu").data("id");wcp_settings.default_folder="",e.ajax({url:wcp_settings.ajax_url,type:"post",data:"action=remove_premio_default_folder&post_type="+wcp_settings.post_type+"&nonce="+wcp_settings.nonce+"&folder_id="+s,cache:!1,async:!1,success:function(t){B(),"1"==(t=e.parseJSON(t)).status&&e(".jstree-node[id='"+t.folder_id+"']").length&&e(".jstree-node[id='"+t.folder_id+"'] > a.jstree-anchor").trigger("focus")}})})),e(document).on("click",".dynamic-menu .copy-folders",(function(t){t.stopPropagation(),O=e(this).closest(".dynamic-menu").data("id"),P="copy",e(".dynamic-menu").remove(),ue(),e(".folders-undo-notification").removeClass("active"),e("#copy-message").addClass("active"),setTimeout((function(){e("#copy-message").removeClass("active")}),5e3),we(),e(".jstree-node[id='"+O+"']").length&&e(".jstree-node[id='"+O+"'] > a.jstree-anchor").trigger("focus")})),e(document).on("click",".dynamic-menu .cut-folders",(function(t){t.stopPropagation(),O=e(this).closest(".dynamic-menu").data("id"),P="cut",e(".dynamic-menu").remove(),ue(),e(".folders-undo-notification").removeClass("active"),e("#cut-message").addClass("active"),L=e("#"+O).data("parent"),setTimeout((function(){e("#cut-message").removeClass("active")}),5e3),we(),e(".jstree-node[id='"+O+"']").length&&e(".jstree-node[id='"+O+"'] > a.jstree-anchor").trigger("focus")})),e(document).on("click",".dynamic-menu .paste-folders",(function(t){t.stopPropagation();var s=e(this).closest(".dynamic-menu").data("id");0!=O&&""!=O&&s!=O&&("cut"==P?"custom"==O?e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0&&(e("#js-tree-menu input.checkbox:checked").each((function(){O=parseInt(e(this).closest("li.jstree-node").attr("id")),""!=s&&0!=s?e("#js-tree-menu").jstree("move_node","#"+O,"#"+s,0):e("#js-tree-menu").jstree("move_node","#"+O,"#",e("#js-tree-menu > ul > li.jstree-node").length)})),e(".folders-undo-notification").removeClass("active"),e("#paste-message").addClass("active"),setTimeout((function(){e("#paste-message").removeClass("active")}),5e3),O=""):(L=e("#"+O).data("parent"),N=O,e("#"+O).index(),e("#js-tree-menu").jstree("move_node","#"+O,"#"+s,0),"cut",e(".folders-undo-notification").removeClass("active"),e("#paste-message").addClass("active"),setTimeout((function(){e("#paste-message").removeClass("active"),0,L=0}),5e3),e(".jstree-node[id='"+s+"']").length&&e(".jstree-node[id='"+s+"'] > a.jstree-anchor").trigger("focus")):ge(O,s),we(),P="",O=0),e(".dynamic-menu").remove()})),e(document).on("click",".paste-folder-action",(function(){(""==m||isNaN(m))&&(m=0),0!=O&&""!=O&&O!=m&&("cut"==P?"custom"==O?e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0&&(e("#js-tree-menu input.checkbox:checked").each((function(){O=parseInt(e(this).closest("li.jstree-node").attr("id")),""!=m&&0!=m?e("#js-tree-menu").jstree("move_node","#"+O,"#"+m,0):e("#js-tree-menu").jstree("move_node","#"+O,"#",e("#js-tree-menu > ul > li.jstree-node").length)})),e(".folders-undo-notification").removeClass("active"),e("#paste-message").addClass("active"),setTimeout((function(){e("#paste-message").removeClass("active")}),5e3)):(L=e("#"+O).data("parent"),N=O,e("#"+O).index()+1,""!=m&&0!=m?e("#js-tree-menu").jstree("move_node","#"+O,"#"+m,0):e("#js-tree-menu").jstree("move_node","#"+O,"#",e("#js-tree-menu > ul > li.jstree-node").length),e(".folders-undo-notification").removeClass("active"),e("#paste-message").addClass("active"),setTimeout((function(){e("#paste-message").removeClass("active")}),5e3),e(".jstree-node[id='"+m+"']").length&&e(".jstree-node[id='"+m+"'] > a.jstree-anchor").trigger("focus")):((""==m||isNaN(m))&&(m=0),ge(O,m)),we(),P="",O=0)})),e(document).on("click",".cut-folder-action",(function(t){t.stopPropagation(),e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0?(O="custom",P="cut",e(".folders-undo-notification").removeClass("active"),e("#cut-message").addClass("active"),setTimeout((function(){e("#cut-message").removeClass("active")}),5e3),we()):""!=m&&0!=m&&(O=m,P="cut",e(".folders-undo-notification").removeClass("active"),e("#cut-message").addClass("active"),setTimeout((function(){e("#cut-message").removeClass("active")}),5e3),we(),e(".jstree-node[id='"+O+"']").length&&e(".jstree-node[id='"+O+"'] > a.jstree-anchor").trigger("focus"))})),e(document).on("click",".copy-folder-action",(function(t){t.stopPropagation(),e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0?(O="custom",P="copy",e(".folders-undo-notification").removeClass("active"),e("#copy-message").addClass("active"),setTimeout((function(){e("#copy-message").removeClass("active")}),5e3),we()):""!=m&&0!=m&&(O=m,P="copy",e(".folders-undo-notification").removeClass("active"),e("#copy-message").addClass("active"),setTimeout((function(){e("#copy-message").removeClass("active")}),5e3),we(),e(".jstree-node[id='"+O+"']").length&&e(".jstree-node[id='"+O+"'] > a.jstree-anchor").trigger("focus"))})),e(document).on("click","#js-tree-menu input.checkbox",(function(){we()})),"attachment"==wcp_settings.post_type?(e(".upload-media-action").removeClass("disabled"),e("#upload_media_folder").prop("disabled",!1)):e("#upload_media_folder").remove()})),"attachment"==wcp_settings.post_type){e(document).ready((function(){"show"==wcp_settings.show_in_page&&e(".wp-header-end").before('<div class="tree-structure-content"><div class="tree-structure"><ul></ul><div class="clear clearfix"></div></div><div class="folders-toggle-button"><span></span></div></div>'),se(),pe()}));var je=null;function ye(s){je=e.ajax({url:wcp_settings.ajax_url,data:"type="+wcp_settings.post_type+"&action=wcp_get_default_list&active_id="+m,method:"post",beforeSend:function(){null!=je&&je.abort()},success:function(o){if(o=e.parseJSON(o),e(".header-posts .total-count").text(o.total_items),e(".un-categorised-items .total-count").text(o.empty_items),selectedVal=e("#media-attachment-taxonomy-filter").val(),"all"!=selectedVal&&1==s){var a=parent.wp;a.media!=t&&(a.media.frame.setState("insert"),null!==a.media.frame.content.get()&&void 0!==a.media.frame.content.get().collection?(a.media.frame.content.get().collection.props.set({ignore:+new Date}),a.media.frame.content.get().options.selection.reset()):a.media.frame.library.props.set({ignore:+new Date}))}b=o.taxonomies,fe(),""!=m&&e("#wcp_folder_"+m).addClass("active-item"),f&&(e("#title_"+g).trigger("click"),f=!1)}})}function ke(){e(".media-frame-content .media-toolbar").width(e(".media-frame-content").width()-20)}function be(e,t,s){var o="";if(s){var a=new Date;a.setTime(a.getTime()+24*s*60*60*1e3),o="; expires="+a.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}function xe(e){document.cookie=e+"=; Max-Age=-99999999;"}ke(),e(window).resize((function(){ke()})),e(document).on("click",".button.organize-button",(function(){e(".media-frame").hasClass("mode-select")?xe("media-select-mode"):be("media-select-mode","on",7),e("button.button.media-button.select-mode-toggle-button").trigger("click"),e(".media-frame").hasClass("mode-select")?(e(".media-info-message").addClass("active"),e(".select-all-item-btn").addClass("active")):(e(".media-info-message, .custom-media-select").removeClass("active"),e(".select-all-item-btn").removeClass("active"))})),e(document).on("click",".select-mode-toggle-button",(function(){setTimeout((function(){e(".media-frame").hasClass("mode-select")||be("media-select-mode","off",-1),e(".media-frame").hasClass("mode-select")?(e(".media-info-message").addClass("active"),e(".select-all-item-btn").addClass("active")):(e(".media-info-message, .custom-media-select").removeClass("active"),e(".select-all-item-btn").removeClass("active"))}),10)})),e(document).on("click",".select-all-item-btn",(function(){e("ul.attachments li:not(.selected)").trigger("click")})),e(document).on("change",".folder_for_media",(function(){"add-folder"==e(this).val()&&(g=0,f=!0,oe())})),e(window).scroll((function(){}))}else;function Ce(){e("button.button.media-button.select-mode-toggle-button").length&&(clearInterval(p),e("button.button.media-button.select-mode-toggle-button").after("<button class='button organize-button'>"+wcp_settings.lang.BULK_ORGANIZE+"</button>"),e(".media-toolbar-secondary").append("<span class='media-info-message'>"+wcp_settings.lang.DRAG_AND_DROP+"</span>"),e(".delete-selected-button").before("<button type='button' class='button button-primary select-all-item-btn'>"+wcp_settings.lang.SELECT_ALL+"</button>"),e(".media-toolbar-secondary").after("<div class='custom-media-select'>"+wcp_settings.lang.MOVE_SELECTED_FILES+" <select class='media-select-folder'></select></div>"),e(".media-toolbar").append("<div style='clear:both;'></div><div class='media-folder-loader'><span>"+wcp_settings.lang.UPLOADING_FILES+"</span> <span id='current_upload_files'></span>/<span id='total_upload_files'></span><div class='folder-progress'><div class='folder-meter orange-bg'><span></span></div></div></div>"),e(".wcp-custom-form").length&&(wp.Uploader!==t&&wp.Uploader.queue.on("reset",(function(){ye(1)})),e(document).ajaxComplete((function(e,t,s){actionName=s.data,"undefined"!=typeof actionName&&actionName.length&&0==actionName.indexOf("action=delete-post&id=")&&ye(0),"undefined"!=typeof actionName&&actionName.length&&0==actionName.indexOf("action=save-attachment&id=")&&ye(0)}))),setTimeout((function(){docReferrar=document.referrer,-1!=docReferrar.indexOf("wp-admin/upload.php")?(mediaMode=function(e){for(var t=e+"=",s=document.cookie.split(";"),o=0;o<s.length;o++){for(var a=s[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}("media-select-mode"),"on"==mediaMode&&(e("button.button.media-button.select-mode-toggle-button").trigger("click"),e(".media-frame").hasClass("mode-select")?e(".media-info-message").addClass("active"):e(".media-info-message, .custom-media-select").removeClass("active"))):xe("media-select-mode"),ye(1)}),1e3))}e(document).ready((function(){"attachment"==wcp_settings.post_type&&e("#tmpl-media-frame").length&&(p=setInterval((function(){Ce()}),1e3)),e(document).on("click",".attachments-browser ul.attachments .thumbnail",(function(){"attachment"==wcp_settings.post_type&&e(".media-toolbar").hasClass("media-toolbar-mode-select")&&(0==e("ul.attachments li.selected").length?e(".custom-media-select").removeClass("active"):e(".custom-media-select").addClass("active"))})),e(document).on("change",".media-select-folder",(function(){if("attachment"==wcp_settings.post_type&&""!=e(this).val()){var t="";e(".attachments-browser li.attachment.selected").each((function(){t+=e(this).attr("data-id")+","})),""!=t&&("-1"==e(this).val()?e.ajax({url:wcp_settings.ajax_url,data:"post_id="+t+"&type="+wcp_settings.post_type+"&action=wcp_remove_post_folder&folder_id="+e(this).val()+"&nonce="+wcp_settings.nonce+"&status="+wcp_settings.taxonomy_status+"&taxonomy="+m,method:"post",success:function(t){0!=g&&g!=e(".media-select-folder").val()&&e("ul.attachments li.selected").remove(),W(),ue()}}):(s=Y(e(this).val(),"nonce"),e.ajax({url:wcp_settings.ajax_url,data:{post_ids:t,type:wcp_settings.post_type,action:"wcp_change_multiple_post_folder",folder_id:e(this).val(),nonce:s,status:wcp_settings.taxonomy_status,taxonomy:m,post_status:wcp_settings.post_status},method:"post",success:function(t){t=e.parseJSON(t),e("#bulk-move-folder").hide(),"1"==t.status?(0!=g&&g!=e(".media-select-folder").val()&&e("ul.attachments li.selected").remove(),W(),ue()):(e(".folder-popup-form").hide(),e(".folder-popup-form").removeClass("disabled"),e("#error-folder-popup-message").html(t.message),e("#error-folder-popup").show())}})))}}))})),e(document).ready((function(){"yes"==wcp_settings.use_shortcuts&&(e(document).on("click",".view-shortcodes",(function(t){t.preventDefault(),e("#keyboard-shortcut").show()})),e(document).on("keydown",(function(t){var s=!(!t.ctrlKey&&!t.metaKey);if(e("input").is(":focus")||e("textarea").is(":focus")||!t.altKey||78!=t.keyCode&&78!=t.which||(t.preventDefault(),e("#add-new-folder").trigger("click")),113!=t.keyCode&&113!=t.which||e("#js-tree-menu .jstree-anchor").is(":focus")&&(g=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id"),ae(),e(".dynamic-menu").remove()),!s||67!=t.keyCode&&67!=t.which||(e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0?(O="custom",P="copy",e(".folders-undo-notification").removeClass("active"),e("#copy-message").addClass("active"),setTimeout((function(){e("#copy-message").removeClass("active")}),5e3),we()):e("#js-tree-menu .jstree-anchor").is(":focus")&&(O=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id"),P="copy",e(".folders-undo-notification").removeClass("active"),e("#copy-message").addClass("active"),setTimeout((function(){e("#copy-message").removeClass("active")}),5e3),we())),!s||88!=t.keyCode&&88!=t.which||(e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0?(O="custom",P="cut",e(".folders-undo-notification").removeClass("active"),e("#cut-message").addClass("active"),setTimeout((function(){e("#cut-message").removeClass("active")}),5e3),we()):e("#js-tree-menu .jstree-anchor").is(":focus")&&(t.preventDefault(),O=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id"),P="cut",e(".folders-undo-notification").removeClass("active"),e("#cut-message").addClass("active"),setTimeout((function(){e("#cut-message").removeClass("active")}),5e3),we())),!s||86!=t.keyCode&&86!=t.which||e("#js-tree-menu .jstree-anchor").is(":focus")&&(t.preventDefault(),(""==(m=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id"))||isNaN(m))&&(m=0),0!=O&&""!=O&&O!=m&&("cut"==P?(L=e("#"+O).data("parent"),N=O,e("#"+O).index()+1,""!=m&&0!=m?e("#js-tree-menu").jstree("move_node","#"+O,"#"+m,0):e("#js-tree-menu").jstree("move_node","#"+O,"#",e("#js-tree-menu > ul > li.jstree-node").length),e(".folders-undo-notification").removeClass("active"),e("#paste-message").addClass("active"),setTimeout((function(){e("#paste-message").removeClass("active")}),5e3)):((""==m||isNaN(m))&&(m=0),ge(O,m)),we(),P="",O=0)),!s||68!=t.keyCode&&68!=t.which||e("#js-tree-menu .jstree-anchor").is(":focus")&&(t.preventDefault(),g=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id"),e(".dynamic-menu").remove(),f=!1,h=!0,e("#add-update-folder-title").text(wcp_settings.lang.DUPLICATING_FOLDER),oe()),!s||75!=t.keyCode&&75!=t.which||e("#keyboard-shortcut").show(),46!=t.keyCode&&46!=t.which&&8!=t.keyCode&&8!=t.which||(e("#menu-checkbox").is(":checked")&&e("#js-tree-menu input.checkbox:checked").length>0?e(".delete-folder-action").trigger("click"):e("#js-tree-menu .jstree-anchor").is(":focus")&&(e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").hasClass("is-locked")||(g=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id"),ne(0),e(".dynamic-menu").remove(),e(".active-menu").removeClass("active-menu")))),s&&(40==t.keyCode||40==t.which)&&e("#js-tree-menu .jstree-anchor").is(":focus")){g=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id");var o=parseInt(e("#"+g).data("parent")),a=parseInt(e("#"+g).index())+1,n=parseInt(e("#"+g).data("child"));isNaN(o)&&(o=e("li#"+g).parents("li.jstree-node").length?e("li#"+g).parents("li.jstree-node").data("folder"):0,n=e("li#"+g).parents("li.jstree-node").length?e("li#"+g).parents("li.jstree-node").children():e("#js-tree-menu > ul > li").length),0==o&&(o=""),n==a?e("#js-tree-menu").jstree("move_node","#"+g,"#"+o,0):e("#js-tree-menu").jstree("move_node","#"+g,"#"+o,a+1)}if(s&&(38==t.keyCode||38==t.which)&&e("#js-tree-menu .jstree-anchor").is(":focus")){g=e("#js-tree-menu .jstree-anchor:focus").closest("li.jstree-node").attr("id");o=parseInt(e("#"+g).data("parent")),a=parseInt(e("#"+g).index())-1,n=parseInt(e("#"+g).data("child"));isNaN(o)&&(a=parseInt(e("#"+g).index())-1,o=e("li#"+g).parents("li.jstree-node").length?e("li#"+g).parents("li.jstree-node").data("folder"):0,n=e("li#"+g).parents("li.jstree-node").length?e("li#"+g).parents("li.jstree-node").children():e("#js-tree-menu > ul > li").length),0==o&&(o=""),-1==a?e("#js-tree-menu").jstree("move_node","#"+g,"#"+o,n):e("#js-tree-menu").jstree("move_node","#"+g,"#"+o,a)}27!=t.keyCode&&27!=t.which||e(".folder-popup-form").hide()})))}))}));